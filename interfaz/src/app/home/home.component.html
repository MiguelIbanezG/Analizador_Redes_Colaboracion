
<div class="container">

  <div class="title-container">
    <svg width="600" height="200">
      <!-- Círculos -->
      <circle cx="40" cy="110" r="30" fill="black" />
      <circle cx="70" cy="50" r="20" fill="black" />
      <circle cx="130" cy="30" r="17" fill="black" />
      <circle cx="130" cy="70" r="10" fill="black" />
      <circle cx="190" cy="60" r="15" fill="black" /> 
      <circle cx="250" cy="30" r="21" fill="black" />
      <circle cx="300" cy="80" r="17" fill="black" />
      <circle cx="370" cy="40" r="24" fill="black" />
      <circle cx="420" cy="87" r="18" fill="black" />
      <circle cx="480" cy="30" r="18" fill="black" />
      <circle cx="480" cy="80" r="10" fill="black" />
      <circle cx="550" cy="110" r="30" fill="black" />
      
      <!-- Líneas -->
      <line x1="40" y1="110" x2="70" y2="50" style="stroke:black;stroke-width:2" />
      <line x1="40" y1="110" x2="130" y2="70" style="stroke:black;stroke-width:2" />
      <line x1="70" y1="50" x2="130" y2="30" style="stroke:black;stroke-width:2" />
      <line x1="70" y1="50" x2="130" y2="70" style="stroke:black;stroke-width:2" />
      <line x1="130" y1="30" x2="130" y2="70" style="stroke:black;stroke-width:2" />
      <line x1="130" y1="30" x2="250" y2="30" style="stroke:black;stroke-width:2" />
      <line x1="130" y1="70" x2="190" y2="60" style="stroke:black;stroke-width:2" />
      <line x1="190" y1="60" x2="250" y2="30" style="stroke:black;stroke-width:2" />
      <line x1="190" y1="60" x2="300" y2="80" style="stroke:black;stroke-width:2" />
      <line x1="250" y1="30" x2="300" y2="80" style="stroke:black;stroke-width:2" />
      <line x1="250" y1="30" x2="370" y2="40" style="stroke:black;stroke-width:2" />
      <line x1="300" y1="80" x2="370" y2="40" style="stroke:black;stroke-width:2" />
      <line x1="300" y1="80" x2="420" y2="87" style="stroke:black;stroke-width:2" />
      <line x1="370" y1="40" x2="420" y2="87" style="stroke:black;stroke-width:2" />
      <line x1="370" y1="40" x2="480" y2="30" style="stroke:black;stroke-width:2" />
      <line x1="420" y1="87" x2="480" y2="30" style="stroke:black;stroke-width:2" />
      <line x1="420" y1="87" x2="480" y2="80" style="stroke:black;stroke-width:2" />
      <line x1="480" y1="30" x2="480" y2="80" style="stroke:black;stroke-width:2" />
      <line x1="480" y1="80" x2="550" y2="110" style="stroke:black;stroke-width:2" />
      <line x1="480" y1="30" x2="550" y2="110" style="stroke:black;stroke-width:2" />
    </svg>
    <!-- Title -->
    <h1>Collaboration Networks</h1>
  </div>

 

  <!-- Search Conference -->
  <div class="box-conference">
    <input type="text" [(ngModel)]="filtersBOX" placeholder="Enter the Conference or Journal" (keyup.enter)="completeSuggestion(filtersBOX)" (input)="autocompleteConference(filtersBOX)">
    <button class="button-add"  type="button" (click)="completeSuggestion(filtersBOX)">Add</button>
    <div class="noResults" *ngIf="noResultsFoundConference && noResultsFoundJournal">
      <p>Conference or Journal not found. Please try another Conference or Journal</p>
    </div>  

    <div class="noResults" *ngIf="repeated">
      <p>This conference or diary is already selected</p>
    </div>

    <div>
      <ul>
        <li class="click-element " *ngFor="let suggestion of completeConference" (click)="selectSuggestion(suggestion)">
          {{ suggestion }}
        </li>
      </ul>
    </div>
  </div>




  <div *ngIf="this.filtersList.length > 0 || this.communities.length >0 " class="filters-list">
    
    <div *ngIf="this.communities.length > 0" class="community-container">
      <p>Communities</p>
      <hr>
      <div *ngFor="let filter of communities; let last = last" class="filter-item">
        <input type="checkbox" [(ngModel)]="filter.selected" />
        <span class="filter-name">{{ filter.name }}</span>
        <button class="button-delete" (click)="deleteCommunity(filter)">X</button>
        <ul>
          <li *ngFor="let filterItem of filter.filtersList">{{ filterItem }}</li>
        </ul>
        <hr class="slim" *ngIf="!last">
      </div>
    </div>

    <div *ngIf="this.currentConferences.length > 0">
      <p>Current Conferences and Journls:</p>
      <hr>
      <ul>
        <li *ngFor="let filter of currentConferences">
          {{ filter }}
          <button class="button-delete" (click)="deleteFilter(filter)">X</button>
        </li>
      </ul>

      <div class="button-community">
        <button (click)="openModal(community)" [disabled]="filtersList.length === 0">Create Community</button>
      </div>

    </div>
    
  </div>



  <ng-template #community>
    <div class="custom-modal">
      <div class="modal-container">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title pull-left">Create Community</h4>
            <button type="button" class="close-btn" aria-label="Close" (click)="closeModal()">
              <span class="close-icon" aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <input type="text" [(ngModel)]="nameCommunity" placeholder="Add name Community">
            <ul>
              <li *ngFor="let filter of currentConferences">
                {{ filter }}
                <button class="button-delete" (click)="deleteFilter(filter)">X</button>
              </li>
            </ul>
            <div class="button-community">
              <button (click)="createCommunity(currentConferences)">Create</button>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </ng-template>
  

  <!-- Buttons Filter -->
  <div class="buttons">
    <div class="button-years">
      <button (click)="execFunctionsYear()" [disabled]="filtersList.length === 0 && communities.length === 0">Filter by years</button>
    </div>
    <div class="button-decade">
      <button (click)="execFunctionsDecades()" [disabled]="filtersList.length  === 0 && communities.length === 0">Filter by decades</button>
    </div>
  </div>

  <!-- Filter by Decade -->
  <div class="decades" *ngIf="showDecades && !showYears">
    <div *ngIf="filteredTitlesConference.length > 0 || filteredTitlesJournal.length > 0 ">
      <label>
        <input type="checkbox" [(ngModel)]="selectDecades" (change)="selectDecade()">
        <span>1989-1999</span>
      </label>
    </div>
  
    <div *ngIf="filteredTitlesConference.length > 0 || filteredTitlesJournal.length > 0 ">
      <label>
        <input type="checkbox" [(ngModel)]="selectDecades2" (change)="selectDecade2()">
        <span>1999-2009</span>
      </label>
    </div>
  
    <div *ngIf="filteredTitlesConference.length > 0 || filteredTitlesJournal.length > 0 ">
      <label>
        <input type="checkbox" [(ngModel)]="selectDecades3" (change)="selectDecade3()">
        <span>2009-2019</span>
      </label>
    </div>
  
    <div *ngIf="filteredTitlesConference.length > 0 || filteredTitlesJournal.length > 0 ">
      <label>
        <input type="checkbox" [(ngModel)]="selectDecades4" (change)="selectDecade4()">
        <span>2019-2024</span>
      </label>
    </div>
  </div>
      
  <!-- Select All -->
  <div *ngIf="(filteredTitlesConference.length > 0 || filteredTitlesJournal.length > 0 ) && !showDecades">
    <label>
      <input type="checkbox" [(ngModel)]="selectAll" (change)="selectAlls()">
      <span>All</span>
    </label>
  </div>
  
  <!-- Filter by Year -->
  <div *ngIf="!showDecades">
    <div class="columns">
      <div class="column" *ngFor="let title of filteredTitles; let i = index">
        <label>
          <input type="checkbox" [(ngModel)]="title.selected" (change)="titleChanged()">
          <span [ngClass]="{ 'selected': title.selected }">{{ title.title }}</span>
        </label>
      </div>
    </div>
  </div>

   <!-- Generate Stats -->
   <div class="stats" >
    <div class="button-stats" *ngIf="showButtons">
      <button [hidden]="(this.noResultsFoundConference === true) &&
      (this.noResultsFoundJournal === true)" [disabled]="!existSelectTitle()" (click)="generateStatistics()">Generate Stats</button>
    </div>
    <div class="button-clear" *ngIf="filteredTitlesConference.length > 0 || filteredTitlesJournal.length > 0 ">
      <button (click)="clear()">Cancel</button>
    </div>
    
  </div>
  <div class="modal-button">
    <button class="help" (click)="openModal(template)">?</button>
  </div>


</div>


<ng-template #template>
  <div class="custom-modal">
    <div class="modal-container">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title pull-left">Help</h4>
          <button type="button" class="close-btn" aria-label="Close" (click)="closeModal()">
            <span class="close-icon" aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Buscar solo uno:</p>
          <ul>
            <li>ER</li>
            <li>World Wide Web</li>
            <!-- Agrega más elementos de la lista aquí -->
          </ul>
          <p>Buscar mas de uno (separar por comas):</p>
          <ul>
            <li>ER, 3DOR, BDM</li>
            <!-- Agrega más elementos de la lista aquí -->
          </ul>
        </div>
      </div>
    </div>
  </div>
</ng-template>









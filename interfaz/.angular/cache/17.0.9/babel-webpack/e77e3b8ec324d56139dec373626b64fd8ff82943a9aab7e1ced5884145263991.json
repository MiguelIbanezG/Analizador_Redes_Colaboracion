{"ast":null,"code":"import _asyncToGenerator from \"/home/miguel/Analizador_Redes_Colaboracion/interfaz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Chart, registerables } from 'chart.js';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../api.service\";\nimport * as i2 from \"../selection.service\";\nChart.register(...registerables);\nexport class ConfigComponent {\n  constructor(apiService, seleccionService) {\n    this.apiService = apiService;\n    this.seleccionService = seleccionService;\n    this.titulosSeleccionados = [];\n    this.conferenceOption = \"\";\n    this.venueName = [];\n    this.publicationsByYear = [];\n    this.allPublications = 0;\n  }\n  ngOnInit() {\n    this.main();\n  }\n  getPublicationsbyYear() {\n    let totalPublications = 0;\n    this.apiService.getPublicationsbyYear().subscribe({\n      next: response => {\n        this.publicationsByYear = response;\n        // Asigna la respuesta del servicio a la variable\n        this.publicationsByYear.sort((a, b) => {\n          return parseInt(a.yearName) - parseInt(b.yearName);\n        });\n        const years = this.publicationsByYear.map(item => item.yearName);\n        const publications = this.publicationsByYear.map(item => item.totalPublications);\n        totalPublications = this.publicationsByYear.reduce((total, year) => total + year.totalPublications, 0); // Suma el número total de publicaciones\n        this.generateBarChart('barChartp', 'Publications by Year', years, publications);\n        console.log('Publicaciones por año:', this.publicationsByYear);\n        console.log('Total de publicaciones ', totalPublications);\n      },\n      error: error => {\n        console.error('Error al obtener las publicaciones en getBooks:', error);\n      }\n    });\n  }\n  getPublications() {\n    this.apiService.getPublications().subscribe({\n      next: response => {\n        console.log('Total de puffffffblicaciones:', response);\n        if (response.length > 0) {\n          // Accede a la propiedad correcta en la respuesta para obtener el número total de publicaciones\n          this.allPublications = response[0].all_publications;\n        } else {\n          // Si la respuesta está vacía, asigna 0 a this.allPublications\n          this.allPublications = 0;\n        }\n        console.log('Total de publicaciones:', this.allPublications);\n      },\n      error: error => {\n        console.error('Error al obtener las publicaciones en getBooks:', error);\n      }\n    });\n  }\n  generateBarChart(idChart, label, labels, data) {\n    this.barChart = new Chart(idChart, {\n      type: 'bar',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: label,\n          data: data,\n          backgroundColor: 'rgb(0, 22, 68)',\n          borderColor: 'rgb(0, 22, 68)',\n          borderWidth: 1\n        }]\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 18,\n                family: 'Roboto'\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    });\n  }\n  main() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.titulosSeleccionados = _this.seleccionService.getSelectedTitles();\n        _this.conferenceOption = _this.seleccionService.getConferenceOption();\n        _this.venueName = _this.seleccionService.getVenueName();\n        _this.getPublicationsbyYear();\n        _this.getPublications();\n      } catch (error) {\n        console.error('Error in getData:', error);\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function ConfigComponent_Factory(t) {\n    return new (t || ConfigComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.SelectionService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ConfigComponent,\n    selectors: [[\"app-config\"]],\n    decls: 16,\n    vars: 1,\n    consts: [[1, \"allNumbers\"], [1, \"flex-container\"], [1, \"flex-item\"], [1, \"canvas-container\"], [\"id\", \"barChartp\"]],\n    template: function ConfigComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"ul\")(2, \"li\");\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"li\");\n        i0.ɵɵtext(5, \"Elemento 2\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"li\");\n        i0.ɵɵtext(7, \"All Publications: 0\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"li\");\n        i0.ɵɵtext(9, \"Elemento 3\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(10, \"div\", 1)(11, \"div\", 2)(12, \"h3\");\n        i0.ɵɵtext(13, \"Number of Publications by Year\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 3);\n        i0.ɵɵelement(15, \"canvas\", 4);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"# of Publications: \", ctx.allPublications, \"\");\n      }\n    },\n    styles: [\"@charset \\\"UTF-8\\\";\\n.flex-container[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  overflow: auto;\\n}\\n\\n.flex-item[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  margin-bottom: 50px;\\n}\\n\\n.canvas-container[_ngcontent-%COMP%] {\\n  border: 2px solid rgb(0, 22, 68);\\n  padding: 20px;\\n  width: 95%;\\n}\\n\\ncanvas[_ngcontent-%COMP%] {\\n  max-width: 100%; \\n\\n  height: auto;\\n  display: block;\\n}\\n\\n.allNumbers[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  font-weight: bold;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29uZmlnL2NvbmZpZy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDSSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLGNBQUE7QUFFSjs7QUFDQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtBQUVKOztBQUNBO0VBQ0ksZ0NBQUE7RUFDQSxhQUFBO0VBQ0EsVUFBQTtBQUVKOztBQUNBO0VBQ0ksZUFBQSxFQUFBLGlDQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUFFSjs7QUFDQTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtBQUVKIiwic291cmNlc0NvbnRlbnQiOlsiLmZsZXgtY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbi5mbGV4LWl0ZW0ge1xuICAgIHBhZGRpbmc6IDIwcHg7XG4gICAgbWFyZ2luLWJvdHRvbTogNTBweDtcbn1cblxuLmNhbnZhcy1jb250YWluZXIge1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYigwLCAyMiwgNjgpOyBcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIHdpZHRoOiA5NSU7XG59XG4gIFxuY2FudmFzIHtcbiAgICBtYXgtd2lkdGg6IDEwMCU7IC8qIEhhY2UgbGFzIGdyw4PCoWZpY2FzIHJlc3BvbnNpdmUgKi9cbiAgICBoZWlnaHQ6IGF1dG87IFxuICAgIGRpc3BsYXk6IGJsb2NrOyBcbn1cblxuLmFsbE51bWJlcnN7XG4gICAgZm9udC1zaXplOiAyMHB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIFxuXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["Chart","registerables","register","ConfigComponent","constructor","apiService","seleccionService","titulosSeleccionados","conferenceOption","venueName","publicationsByYear","allPublications","ngOnInit","main","getPublicationsbyYear","totalPublications","subscribe","next","response","sort","a","b","parseInt","yearName","years","map","item","publications","reduce","total","year","generateBarChart","console","log","error","getPublications","length","all_publications","idChart","label","labels","data","barChart","type","datasets","backgroundColor","borderColor","borderWidth","options","plugins","legend","color","font","size","family","scales","y","beginAtZero","_this","_asyncToGenerator","getSelectedTitles","getConferenceOption","getVenueName","_","i0","ɵɵdirectiveInject","i1","ApiService","i2","SelectionService","_2","selectors","decls","vars","consts","template","ConfigComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate1"],"sources":["/home/miguel/Analizador_Redes_Colaboracion/interfaz/src/app/config/config.component.ts","/home/miguel/Analizador_Redes_Colaboracion/interfaz/src/app/config/config.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ApiService } from '../api.service';\nimport { SelectionService } from '../selection.service';\nimport { Chart, registerables } from 'chart.js';\nChart.register(...registerables);\n\n\n@Component({\n  selector: 'app-config',\n  templateUrl: './config.component.html',\n  styleUrls: ['./config.component.scss']\n})\nexport class ConfigComponent implements OnInit{\n  \n  titulosSeleccionados: any[] = [];\n  conferenceOption: string = \"\";\n  venueName: any[] = [];\n  publicationsByYear: { yearName: string, totalPublications: number }[] = [];\n  allPublications = 0;\n  barChart!: Chart;\n  \n\n  constructor(\n    private apiService: ApiService,\n    private seleccionService: SelectionService,\n  ) {}\n\n\n\n  ngOnInit() {\n    this.main();\n  }\n\n  getPublicationsbyYear() {\n \n    let totalPublications = 0;\n\n    this.apiService.getPublicationsbyYear().subscribe({\n      next: (response: any[]) => {\n        this.publicationsByYear = response; \n        // Asigna la respuesta del servicio a la variable\n        this.publicationsByYear.sort((a, b) => {\n          return parseInt(a.yearName) - parseInt(b.yearName);\n        });\n    \n        const years = this.publicationsByYear.map(item => item.yearName);\n        const publications = this.publicationsByYear.map(item => item.totalPublications);\n    \n\n        totalPublications = this.publicationsByYear.reduce((total, year) => total + year.totalPublications, 0); // Suma el número total de publicaciones\n\n        this.generateBarChart('barChartp', 'Publications by Year', years, publications);\n        console.log('Publicaciones por año:', this.publicationsByYear);\n        console.log('Total de publicaciones ', totalPublications);\n \n      },\n      error: (error: any) => {\n        console.error('Error al obtener las publicaciones en getBooks:', error);\n      }\n    });\n  }\n\n  getPublications() {\n    this.apiService.getPublications().subscribe({\n      next: (response: any[]) => {\n        console.log('Total de puffffffblicaciones:', response);\n  \n        if (response.length > 0) {\n          // Accede a la propiedad correcta en la respuesta para obtener el número total de publicaciones\n          this.allPublications = response[0].all_publications;\n        } else {\n          // Si la respuesta está vacía, asigna 0 a this.allPublications\n          this.allPublications = 0;\n        }\n        console.log('Total de publicaciones:', this.allPublications);\n      },\n      error: (error: any) => {\n        console.error('Error al obtener las publicaciones en getBooks:', error);\n      }\n    });\n  }\n\n  generateBarChart(idChart: string, label: string, labels: any[], data: any[]) {\n    this.barChart = new Chart(idChart, {\n      type: 'bar',\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: label,\n            data: data,\n            backgroundColor: 'rgb(0, 22, 68)',\n            borderColor: 'rgb(0, 22, 68)',\n            borderWidth: 1\n          }\n        ]\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 18,\n                family: 'Roboto',\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    });\n  }\n\n\n\n  async main(){\n    try {\n      this.titulosSeleccionados = this.seleccionService.getSelectedTitles();\n      this.conferenceOption = this.seleccionService.getConferenceOption();\n      this.venueName = this.seleccionService.getVenueName();\n\n      this.getPublicationsbyYear();\n      this.getPublications();\n    \n\n  } catch (error) {\n    console.error('Error in getData:', error);\n  }\n  }\n \n}\n\n","<div class=\"allNumbers\">\n    <ul>\n        <li># of Publications: {{allPublications}}</li>\n        <li>Elemento 2</li>\n        <li>All Publications: 0</li>\n        <li>Elemento 3</li>\n      </ul>\n</div>\n\n\n<div class=\"flex-container\" >\n\n    <div class=\"flex-item\">\n      <h3>Number of Publications by Year</h3>\n\n      <div class=\"canvas-container\">\n        <canvas id=\"barChartp\"></canvas>\n      </div>\n    </div>\n   \n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
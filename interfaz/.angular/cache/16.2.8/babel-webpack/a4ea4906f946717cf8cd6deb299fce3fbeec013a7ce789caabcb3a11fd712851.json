{"ast":null,"code":"import _asyncToGenerator from \"/home/miguel/Analizador_Redes_Colaboracion/interfaz/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n//import { Chart, CategoryScale, LineController  } from 'chart.js';\nimport { Chart, registerables } from 'chart.js';\nimport { singular } from 'pluralize';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../api.service\";\nimport * as i3 from \"../seleccion.service\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"angular-tag-cloud-module\";\nconst _c0 = [\"chartCanvas\"];\nChart.register(...registerables);\nexport class EstadisticasComponent {\n  constructor(route, apiService, seleccionService, http) {\n    this.route = route;\n    this.apiService = apiService;\n    this.seleccionService = seleccionService;\n    this.http = http;\n    this.titulosSeleccionados = [];\n    this.yearsSeleccionados = [];\n    this.conferenceOption = \"\";\n    this.venueName = \"\";\n    this.papers = [];\n    this.colaboraciones = [];\n    this.singleAuthor = [];\n    this.estadisticas = [];\n    this.researchers = [];\n    this.papersWithAuthors = [];\n    this.autoresPorPapersTable = [];\n    this.papersPorAutoresTable = [];\n    this.decadeStats = [];\n    this.commonNames = {};\n    this.options = {\n      // if width is between 0 and 1 it will be set to the width of the upper element multiplied by the value\n      width: 500,\n      // if height is between 0 and 1 it will be set to the height of the upper element multiplied by the value\n      height: 200,\n      overflow: false,\n      realignOnResize: false,\n      strict: false,\n      step: 2\n    };\n    this.cloudData = [];\n  }\n  loadCommonNames() {\n    this.http.get('assets/common_names.txt', {\n      responseType: 'text'\n    }).subscribe(data => {\n      this.commonNames = this.parseCommonNames(data);\n    }, error => {\n      console.error('Error al cargar los datos:', error);\n    });\n  }\n  parseCommonNames(data) {\n    const lineas = data.split('\\n');\n    const diccionario = {};\n    let nombreActual = '';\n    let datosActuales = {\n      frec_paises: {},\n      genero: ''\n    };\n    for (const linea of lineas) {\n      if (linea.startsWith('nombre:')) {\n        nombreActual = linea.split(':')[1].trim();\n        datosActuales = {\n          frec_paises: {},\n          genero: ''\n        };\n      } else if (linea.startsWith('frec_paises:')) {\n        const frec_paisesStr = linea.substring(linea.indexOf('{'), linea.lastIndexOf('}') + 1);\n        const frec_paises = JSON.parse(frec_paisesStr);\n        datosActuales.frec_paises = frec_paises;\n      } else if (linea.startsWith('genero:')) {\n        datosActuales.genero = linea.split(':')[1].trim();\n      } else if (linea.trim() === '') {\n        diccionario[nombreActual] = datosActuales;\n      }\n    }\n    return diccionario;\n  }\n  ngOnInit() {\n    this.loadCommonNames();\n    //LLamada a la funcion principal para la ejecucion de todo\n    this.main();\n  }\n  ngAfterViewInit() {\n    // Este método se ejecutará después de que Angular haya inicializado la vista\n    // Perfe para realizar cualquier manipulación adicional del DOM relacionada con el gráfico\n    // como ajustes de estilo, cambios dinámicos en los datos, etc.\n  }\n  esperarResearcherNoVacio() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      while (!_this.researchers || _this.researchers.length === 0) {\n        yield new Promise(resolve => setTimeout(resolve, 100));\n      }\n    })();\n  }\n  obtenerResearchers() {\n    this.apiService.obtenerResearchers(this.titulosSeleccionados).subscribe({\n      next: response => {\n        this.researchers = response;\n        this.statsResearchers();\n        this.generarGrafico3('lineChart1', 'Número de investigadores', this.estadisticas[0].anios, this.estadisticas[0].numResearchers);\n      },\n      error: error => {\n        console.error('Error al obtener los researchers:', error);\n      }\n    });\n  }\n  obtenerPapers() {\n    this.apiService.obtenerPapers(this.titulosSeleccionados, this.conferenceOption, this.venueName).subscribe({\n      next: response => {\n        this.papers = response;\n        this.statsPapers();\n        this.generarGrafico3('lineChart2', 'Número de papers', this.estadisticas[1].anios, this.estadisticas[1].numPapers);\n      },\n      error: error => {\n        console.error('Error al obtener los papers:', error);\n      }\n    });\n  }\n  obtenerColaboraciones() {\n    this.apiService.obtenerColaboraciones(this.titulosSeleccionados, this.conferenceOption, this.venueName).subscribe({\n      next: response => {\n        this.colaboraciones = response;\n        this.statsColaboraciones();\n        this.generarGrafico3('lineChart3', 'Densidad', this.estadisticas[3].anios, this.estadisticas[3].densidades);\n      },\n      error: error => {\n        console.error('Error al obtener las colaboraciones:', error);\n      }\n    });\n  }\n  obtenerInstituciones() {\n    // que son las instituciones?\n  }\n  esperarAuthorsWithPapersNoVacio() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      while (!_this2.papersWithAuthors || _this2.papersWithAuthors.length === 0) {\n        yield new Promise(resolve => setTimeout(resolve, 100));\n      }\n    })();\n  }\n  esperarSingleAuthorsNoVacio() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      while (!_this3.singleAuthor || _this3.singleAuthor.length === 0) {\n        yield new Promise(resolve => setTimeout(resolve, 100));\n      }\n    })();\n  }\n  obtenerSingleAuthorPapers() {\n    var _this4 = this;\n    this.apiService.obtenerAuthorsPapers(this.titulosSeleccionados, this.conferenceOption, this.venueName).subscribe({\n      next: function () {\n        var _ref = _asyncToGenerator(function* (response) {\n          _this4.singleAuthor = response;\n          _this4.statsSingleAuthor();\n          _this4.generarGraficoBarras('barChart1', 'Single Author Papers', _this4.estadisticas[4].anios, _this4.estadisticas[4].porcentajes);\n        });\n        return function next(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      error: error => {\n        console.error('Error al obtener los Author Papers:', error);\n      }\n    });\n  }\n  /**\n   * Función para obtener las distribuciones tanto de autores por papers como de papers por autores\n   */\n  obtenerDistribuciones() {\n    console.log(\"distribuciones antes o despues?\");\n    const labels = ['1', '2', '3', '4', '5 o más'];\n    // Este representa el número de autores que tiene cada paper\n    const autoresPorPaper = [1, 2, 3, 4].map(numAuthors => this.papersWithAuthors.filter(paper => paper.numAuthors === numAuthors).length);\n    autoresPorPaper[4] = this.papersWithAuthors.filter(paper => paper.numAuthors >= 5).length;\n    let totalPapers = this.papers.reduce((total, paper) => total + paper.numPapers, 0);\n    // Ese representa el número de papers publicados que tiene cada autor\n    const papersPorAutor = [1, 2, 3, 4].map(numPubs => this.singleAuthor.filter(paper => paper.numPublications === numPubs).length);\n    papersPorAutor[4] = this.singleAuthor.filter(paper => paper.numPublications >= 5).length;\n    const totalAutores = this.singleAuthor.length;\n    // Creamos las dos tablas que se vinculan con los ids del html\n    const autoresTabla = document.querySelector('#autoresTabla tbody');\n    const papersTabla = document.querySelector('#papersTabla tbody');\n    if (autoresTabla !== null) {\n      autoresPorPaper.forEach((cantidad, index) => {\n        const row = document.createElement('tr');\n        const porcentaje = (cantidad / totalPapers * 100).toFixed(2);\n        const valor = cantidad.toString() + \"(\" + porcentaje + \")\";\n        row.innerHTML = `<td>${labels[index]}</td><td>${valor}</td>`;\n        autoresTabla.appendChild(row);\n      });\n    }\n    if (papersTabla !== null) {\n      papersPorAutor.forEach((cantidad, index) => {\n        const row = document.createElement('tr');\n        const porcentaje = (cantidad / totalAutores * 100).toFixed(2);\n        const valor = cantidad.toString() + \"(\" + porcentaje + \")\";\n        row.innerHTML = `<td>${labels[index]}</td><td>${valor}</td>`;\n        papersTabla.appendChild(row);\n      });\n    }\n  }\n  obtenerDatosDemograficos() {\n    console.log(\"demograficos antes o despues?\");\n    const datasets = this.researchers.map(researcher => {\n      let nombre = researcher.researcher.properties.name.split(' ')[0];\n      if (nombre.includes(\"-\")) {\n        nombre = nombre.split('-')[0];\n      }\n      const anios = Array.isArray(researcher.years) ? researcher.years : [researcher.years];\n      const datasetPorAnio = anios.map(year => {\n        const info = this.commonNames[nombre];\n        const genero = info ? info.genero : 'Desconocido';\n        const frecuencias = info ? info.frec_paises : {};\n        return {\n          year,\n          nombre,\n          genero,\n          frecuencias\n        };\n      });\n      return datasetPorAnio;\n    }).flat();\n    console.log(\"datasets en demogr\");\n    console.log(datasets);\n    this.statsGenero(datasets);\n    this.statsGeografia(datasets);\n  }\n  generarNGrams(titles, n) {\n    const ngrams = [];\n    titles.forEach(title => {\n      const words = title.toLowerCase().split(\" \");\n      for (let i = 0; i < words.length - n + 1; i++) {\n        ngrams.push(words.slice(i, i + n).join(\" \"));\n      }\n    });\n    return ngrams;\n  }\n  countFrequencies(ngrams) {\n    const frequencies = new Map();\n    ngrams.forEach(ngram => {\n      const count = frequencies.get(ngram) || 0;\n      frequencies.set(ngram, count + 1);\n    });\n    return frequencies;\n  }\n  limpiarTitulo(titulo, stopwords) {\n    // Separar el título en palabras\n    const palabras = titulo.toLowerCase().split(\" \").map(palabra => palabra.replace(/[^\\w\\s]/g, \"\"));\n    // Eliminamos repeticiones de letras y plurales para hacer mejor la frecuencia\n    const palabrasSinRepetir = palabras.map(palabra => palabra.replace(/(.)\\1+/g, \"$1\"));\n    const palabrasSingulares = palabrasSinRepetir.map(palabra => singular(palabra));\n    // Filtrar las palabras para eliminar las stopwords\n    const palabrasFiltradas = palabrasSingulares.filter(palabra => !stopwords.includes(palabra));\n    // Unir las palabras filtradas en un nuevo título\n    const nuevoTitulo = palabrasFiltradas.join(' ');\n    return nuevoTitulo;\n  }\n  getTopN(frequencies, n) {\n    const sortedFrequencies = [...frequencies.entries()].sort((a, b) => b[1] - a[1]);\n    return sortedFrequencies.slice(0, n);\n  }\n  obtenerTopicAnalisis() {\n    // Requerimos natural para tokenizar y eliminar las stopwords, y calcular frecuencias\n    const stopwords = ['i', 'me', 'my', 'myself', 'we', 'our', 'ours', 'ourselves', 'you', 'your', 'yours', 'yourself', 'yourselves', 'he', 'him', 'his', 'himself', 'she', 'her', 'hers', 'herself', 'it', 'its', 'itself', 'they', 'them', 'their', 'theirs', 'themselves', 'what', 'which', 'who', 'whom', 'this', 'that', 'these', 'those', 'am', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'have', 'has', 'had', 'having', 'do', 'does', 'did', 'doing', 'a', 'an', 'the', 'and', 'but', 'if', 'or', 'because', 'as', 'until', 'while', 'of', 'at', 'by', 'for', 'with', 'about', 'against', 'between', 'into', 'through', 'during', 'before', 'after', 'above', 'below', 'to', 'from', 'up', 'down', 'in', 'out', 'on', 'off', 'over', 'under', 'again', 'further', 'then', 'once', 'here', 'there', 'when', 'where', 'why', 'how', 'all', 'any', 'both', 'each', 'few', 'more', 'most', 'other', 'some', 'such', 'no', 'nor', 'not', 'only', 'own', 'same', 'so', 'than', 'too', 'very', 's', 't', 'can', 'will', 'just', 'don', 'should', 'now', '.', ','];\n    const titulosLimpios = this.papersWithAuthors.map(paper => {\n      const ipName = this.limpiarTitulo(paper.ipName, stopwords);\n      const year = parseInt(paper.year);\n      return {\n        ipName,\n        year\n      };\n    });\n    const bigrams = this.generarNGrams(titulosLimpios.map(paper => paper.ipName), 2);\n    const trigrams = this.generarNGrams(titulosLimpios.map(paper => paper.ipName), 3);\n    const bigramFrequencies = this.countFrequencies(bigrams);\n    const trigramFrequencies = this.countFrequencies(trigrams);\n    const top20Bigrams = this.getTopN(bigramFrequencies, 20);\n    const top20Trigrams = this.getTopN(trigramFrequencies, 20);\n    const top20BigramsWithYears = top20Bigrams.map(([ngram, count]) => ({\n      ngram,\n      count,\n      years: titulosLimpios.filter(paper => paper.ipName.includes(ngram)).map(paper => paper.year)\n    }));\n    const top20TrigramsWithYears = top20Trigrams.map(([ngram, count]) => ({\n      ngram,\n      count,\n      years: titulosLimpios.filter(paper => paper.ipName.includes(ngram)).map(paper => paper.year)\n    }));\n    const table1 = document.querySelector('#tablaBigramas tbody');\n    const table2 = document.querySelector('#tablaTrigramas tbody');\n    if (table1 instanceof HTMLElement && table2 instanceof HTMLElement) {\n      top20BigramsWithYears.forEach(({\n        ngram,\n        count,\n        years\n      }) => {\n        const minYear = Math.min(...years);\n        const maxYear = Math.max(...years);\n        const row = document.createElement('tr');\n        row.innerHTML = `<td>${ngram}</td><td>${count}</td><td>${minYear}</td><td>${maxYear}</td>`;\n        table1.appendChild(row);\n      });\n      top20TrigramsWithYears.forEach(({\n        ngram,\n        count,\n        years\n      }) => {\n        const minYear = Math.min(...years);\n        const maxYear = Math.max(...years);\n        const row = document.createElement('tr');\n        row.innerHTML = `<td>${ngram}</td><td>${count}</td><td>${minYear}</td><td>${maxYear}</td>`;\n        table2.appendChild(row);\n      });\n    }\n    const combinedData = [...top20BigramsWithYears, ...top20TrigramsWithYears];\n    combinedData.sort((a, b) => b.count - a.count);\n    const maxFrecuencia = combinedData[0].count;\n    const minWeight = 0;\n    const maxWeight = 20;\n    const wordCloudData = combinedData.map((item, index) => ({\n      text: item.ngram,\n      weight: this.calcularWeight(item.count, maxFrecuencia, minWeight, maxWeight),\n      color: this.randomColor()\n    }));\n    console.log(\"wordcloud data\");\n    console.log(wordCloudData);\n    this.cloudData = wordCloudData;\n  }\n  calcularWeight(frecuencia, maxFrecuencia, minWeight, maxWeight) {\n    const peso = frecuencia / maxFrecuencia;\n    const pesoNormalizado = peso * (maxWeight - minWeight) + minWeight;\n    return Math.round(pesoNormalizado);\n  }\n  /**\n   * ############################################\n   */\n  statsResearchers() {\n    const numResearchers = this.researchers.length;\n    const anios = this.titulosSeleccionados.map(titulo => titulo.properties.name);\n    this.yearsSeleccionados = anios;\n    const numResearchersPorAnio = anios.map(anio => this.researchers.filter(researcher => researcher.years.includes(anio)).length);\n    console.log(\"this.reserrchers\");\n    console.log(this.researchers);\n    this.estadisticas[0] = {\n      anios: anios,\n      numResearchers: numResearchersPorAnio\n    };\n  }\n  statsPapers() {\n    const anios = this.papers.map(paper => paper.year); // Extraer los años de this.numPapers\n    const numPapers = this.papers.map(paper => paper.numPapers);\n    console.log(\"this.papers en stats papers\");\n    console.log(this.papers);\n    this.estadisticas[1] = {\n      anios: anios,\n      numPapers: numPapers\n    };\n  }\n  statsInstitutions() {\n    const anios = this.papers.map(paper => paper.year);\n    // Extraer los años de this.numPapers\n    // const numPapers = this.papers.map(paper => paper.numPapers); \n    this.estadisticas[2] = {\n      anios: anios,\n      numPapers: anios\n    };\n  }\n  statsColaboraciones() {\n    const colabsXtotal = this.papers.map(paper => {\n      const colab = this.colaboraciones.find(c => c.year === paper.year);\n      return {\n        year: paper.year,\n        numColabs: colab ? colab.numColabs : 0,\n        numPapers: paper.numPapers\n      };\n    });\n    const densidad = colabsXtotal.map(dato => {\n      const {\n        year,\n        numColabs,\n        numPapers\n      } = dato;\n      const densidad = numColabs / numPapers;\n      return {\n        densidad,\n        year\n      };\n    });\n    this.estadisticas[3] = {\n      anios: densidad.map(dato => dato.year),\n      densidades: densidad.map(dato => dato.densidad)\n    };\n  }\n  statsSingleAuthor() {\n    const papersWithAuthors = [];\n    // Mapea todos los researchers, para crear papersWithAuthors, que es un array que tiene el nombre de una publicacion\n    // y los autores que han contribuido él.\n    this.singleAuthor.forEach(author => {\n      author.ipNames.forEach(ipName => {\n        const paperIndex = papersWithAuthors.findIndex(paper => paper.ipName === ipName);\n        if (paperIndex !== -1) {\n          papersWithAuthors[paperIndex].numAuthors++;\n          papersWithAuthors[paperIndex].authorNames.push(author.researcher);\n        } else {\n          papersWithAuthors.push({\n            ipName,\n            numAuthors: 1,\n            authorNames: [author.researcher],\n            year: author.year\n          });\n        }\n      });\n    });\n    this.papersWithAuthors = papersWithAuthors;\n    // Conseguimos todas las entradas cuyo autor sea uno, para las estadisticas\n    const papersWithOneAuthor = papersWithAuthors.filter(paper => paper.numAuthors === 1);\n    const porcentajeByYear = this.papers.map(paper => {\n      const year = paper.year;\n      const numPapers = paper.numPapers;\n      const numPapersWithSingleAuthor = papersWithOneAuthor.filter(paper => paper.year === year).length;\n      const porcentaje = numPapersWithSingleAuthor / numPapers * 100;\n      return {\n        year,\n        porcentaje\n      };\n    });\n    this.estadisticas[4] = {\n      anios: porcentajeByYear.map(dato => dato.year),\n      porcentajes: porcentajeByYear.map(dato => dato.porcentaje)\n    };\n  }\n  statsGenero(datasets) {\n    const datasetsPorGenero = {};\n    datasets.forEach(data => {\n      const {\n        year,\n        genero\n      } = data;\n      let genderKey = '';\n      if (genero == 'M' || genero == '?M' || genero == '1M' || genero == '?') {\n        genderKey = 'Hombres';\n      } else if (genero == 'F' || genero == '?F' || genero == '1F') {\n        genderKey = 'Mujeres';\n      } else {\n        genderKey = 'Desconocido';\n      }\n      if (!datasetsPorGenero[genderKey]) {\n        datasetsPorGenero[genderKey] = [];\n      }\n      const existingData = datasetsPorGenero[genderKey].find(d => d.year === year);\n      if (existingData) {\n        existingData.count++;\n      } else {\n        datasetsPorGenero[genderKey].push({\n          year,\n          count: 1\n        });\n      }\n    });\n    // Crear un objeto para almacenar los datos ordenados\n    const datosOrdenados = {};\n    const hombres = datasetsPorGenero['Hombres'];\n    const mujeres = datasetsPorGenero['Mujeres'];\n    // Ordenar los datos de hombres\n    hombres.forEach(dato => {\n      const anio = dato.year;\n      const conteo = dato.count;\n      datosOrdenados[anio] = {\n        hombres: conteo,\n        mujeres: 0,\n        total: conteo\n      };\n    });\n    // Ordenar los datos de mujeres y combinarlos con los datos de hombres\n    mujeres.forEach(dato => {\n      const anio = dato.year;\n      const conteo = dato.count;\n      if (datosOrdenados[anio]) {\n        datosOrdenados[anio].mujeres = conteo;\n        datosOrdenados[anio].total += conteo;\n      } else {\n        datosOrdenados[anio] = {\n          mujeres: conteo,\n          hombres: 0,\n          total: conteo\n        };\n      }\n    });\n    console.log(\"datos ordenados\");\n    console.log(datosOrdenados);\n    // Obtener los años ordenados\n    const aniosOrdenados = Object.keys(datosOrdenados).sort();\n    const conteosHombres = aniosOrdenados.map(anio => Number((datosOrdenados[anio].hombres / datosOrdenados[anio].total).toFixed(4)));\n    const conteosMujeres = aniosOrdenados.map(anio => Number((datosOrdenados[anio].mujeres / datosOrdenados[anio].total).toFixed(4)));\n    console.log(\"conteos hombres\");\n    console.log(conteosHombres);\n    this.generarGraficoCircular('lineChart4', aniosOrdenados, ['Hombres', 'Mujeres'], [conteosHombres, conteosMujeres]);\n  }\n  generarGraficoCircular(chartId, labels, datasetsLabels, datasetsData) {\n    const backgroundColors = datasetsLabels.map((label, index) => {\n      return label.toLowerCase() === 'hombres' ? 'blue' : 'red';\n    });\n    const datasets = datasetsLabels.map((label, index) => ({\n      label: label,\n      data: datasetsData[index],\n      backgroundColor: backgroundColors[index]\n    }));\n    const chartConfig = {\n      type: 'pie',\n      data: {\n        labels: datasetsLabels,\n        datasets: datasets\n      },\n      options: {\n        plugins: {\n          legend: {\n            display: true,\n            position: 'top'\n          }\n        }\n      }\n    };\n    const ctx = document.getElementById(chartId);\n    new Chart(ctx, chartConfig);\n  }\n  statsGeografia(datasets) {\n    const mapeoFecha = {};\n    const datasetFiltrado = datasets.filter(objeto => Object.keys(objeto.frecuencias).length > 0);\n    // Obtener todas las fechas únicas\n    const fechasUnicas = [...new Set(datasetFiltrado.map(dato => dato.year))];\n    // Iterar sobre las fechas\n    for (const fecha of fechasUnicas) {\n      const objetosFecha = datasetFiltrado.filter(dato => dato.year === fecha);\n      // Crear objeto de mapeo para la fecha actual\n      mapeoFecha[fecha] = {};\n      for (const objeto of objetosFecha) {\n        let paisMasAlto = '';\n        let frecuenciaMasAlta = -1;\n        for (const pais in objeto.frecuencias) {\n          if (objeto.frecuencias[pais] > frecuenciaMasAlta) {\n            paisMasAlto = pais;\n            frecuenciaMasAlta = objeto.frecuencias[pais];\n          }\n        }\n        if (!(paisMasAlto in mapeoFecha[fecha])) {\n          mapeoFecha[fecha][paisMasAlto] = 1;\n        } else {\n          mapeoFecha[fecha][paisMasAlto] = mapeoFecha[fecha][paisMasAlto] + 1;\n        }\n      }\n    }\n    console.log(\"mapeoFecha antes\");\n    console.log(mapeoFecha);\n    // Normalizamos valores según su total\n    for (const year in mapeoFecha) {\n      let total = 0;\n      for (const country in mapeoFecha[year]) {\n        total += mapeoFecha[year][country];\n      }\n      for (const country in mapeoFecha[year]) {\n        mapeoFecha[year][country] = Number((mapeoFecha[year][country] / total).toFixed(4));\n      }\n    }\n    const years = Object.keys(mapeoFecha); // Obtener las llaves de los años\n    const countries = Object.keys(mapeoFecha[years[0]]); // Obtener los nombres de los países\n    const datasetsLabels = countries; // Etiquetas de los conjuntos de datos serán los nombres de los países\n    // Crear la matriz de datos para los países\n    const datasetsData = countries.map(country => years.map(year => mapeoFecha[year][country]));\n    console.log(\"datasetsData\");\n    console.log(datasetsData);\n    this.generarGraficoMultiple('lineChart5', years, datasetsLabels, datasetsData);\n  }\n  filterAuthorsByDecade(authors, startYear, endYear) {\n    const filteredAuthors = [];\n    // Recorrer los autores originales\n    authors.forEach(author => {\n      // Verificar si el autor está dentro de la década especificada\n      const authorYears = author.year.split(\",\").map(Number).filter(year => year >= startYear && year <= endYear);\n      if (authorYears.length > 0) {\n        // Buscar si ya existe un autor fusionado con el mismo nombre y década\n        const existingAuthor = filteredAuthors.find(filteredAuthor => filteredAuthor.researcher === author.researcher);\n        if (existingAuthor) {\n          // Fusionar las entradas del autor existente con las del autor actual\n          existingAuthor.numPublications += author.numPublications;\n          existingAuthor.year += `, ${author.year}`;\n        } else {\n          // Agregar el autor actual a la lista de autores filtrados\n          filteredAuthors.push({\n            ipNames: author.ipNames,\n            numPublications: author.numPublications,\n            researcher: author.researcher,\n            year: author.year\n          });\n        }\n      }\n    });\n    return filteredAuthors;\n  }\n  statsProlificAuthors(selectedYears) {\n    // Obtener el rango de años seleccionados por el usuario\n    const startYear = Math.min(...selectedYears);\n    const endYear = Math.max(...selectedYears);\n    // Calcular las décadas correspondientes al rango de años seleccionados\n    const startDecade = Math.floor(startYear / 10) * 10;\n    const endDecade = Math.floor(endYear / 10) * 10;\n    // Generar las décadas dentro del rango de años seleccionados\n    const decades = [];\n    for (let decade = startDecade; decade <= endDecade; decade += 10) {\n      const decadeLabel = `${decade}s`;\n      const decadeStartYear = decade;\n      const decadeEndYear = decade + 9;\n      const decadeAuthors = this.filterAuthorsByDecade(this.singleAuthor, decadeStartYear, decadeEndYear);\n      decades.push({\n        label: decadeLabel,\n        startYear: decadeStartYear,\n        endYear: decadeEndYear,\n        authors: decadeAuthors\n      });\n    }\n    // Ordenar los autores por número de publicaciones en cada década\n    decades.forEach(decade => {\n      decade.authors.sort((a, b) => b.numPublications - a.numPublications);\n      if (decade.authors.length > 20) {\n        decade.authors = decade.authors.slice(0, 20);\n      }\n    });\n    // Devolver las décadas con los autores ordenados\n    return decades;\n  }\n  generarTablasDecadas(decadeStats) {\n    const tablas = {\n      '1990s': document.querySelector('#tabla90 tbody'),\n      '2000s': document.querySelector('#tabla00 tbody'),\n      '2010s': document.querySelector('#tabla10 tbody'),\n      '2020s': document.querySelector('#tabla20 tbody')\n    };\n    console.log(\"decadestats\");\n    console.log(decadeStats);\n    for (const decada of decadeStats) {\n      const tabla = tablas[decada.label];\n      if (tabla instanceof HTMLElement) {\n        decada.authors.slice(0, 20).forEach(autor => {\n          const row = document.createElement('tr');\n          row.innerHTML = `<td>${autor.researcher}</td><td>${autor.numPublications}</td>`;\n          tabla.appendChild(row);\n        });\n      }\n    }\n  }\n  generarGrafico3(idChart, label, labels, data) {\n    this.lineChart = new Chart(idChart, {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: label,\n          data: data,\n          fill: false,\n          borderColor: 'rgb(0, 22, 68)',\n          borderWidth: 1\n        }]\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 25,\n                family: 'Roboto'\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            type: 'linear',\n            display: true\n          }\n        }\n      }\n    });\n  }\n  generarGraficoMultiple(chartId, labels, datasetsLabels, datasetsData) {\n    const datasets = datasetsLabels.map((label, index) => ({\n      label: label,\n      data: datasetsData[index],\n      backgroundColor: 'rgba(0, 0, 0, 0.1)',\n      borderColor: this.getRandomColor(index)\n    }));\n    const chartConfig = {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: datasets\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 25,\n                family: 'Roboto'\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            type: 'linear',\n            display: true\n          }\n        }\n      }\n    };\n    // Crear el gráfico\n    const ctx = document.getElementById(chartId);\n    new Chart(ctx, chartConfig);\n  }\n  generarGraficoBarras(idChart, label, labels, data) {\n    this.barChart = new Chart(idChart, {\n      type: 'bar',\n      data: {\n        labels: labels,\n        datasets: [{\n          label: label,\n          data: data,\n          backgroundColor: 'rgb(0, 22, 68)',\n          borderColor: 'rgb(0, 22, 68)',\n          borderWidth: 1\n        }]\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 25,\n                family: 'Roboto'\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    });\n  }\n  randomColor() {\n    const r = Math.floor(Math.random() * 256);\n    const g = Math.floor(Math.random() * 256);\n    const b = Math.floor(Math.random() * 256);\n    return `rgba(${r}, ${g}, ${b}, 1)`;\n  }\n  getRandomColor(index) {\n    let colors = {\n      0: \"rgba(75, 192, 192, 1)\",\n      1: \"rgba(192, 75, 75, 1)\",\n      2: \"rgba(98, 192, 75, 1)\",\n      3: \"rbga(192, 141, 75, 1)\",\n      4: \"rgba(226, 232, 107, 1)\",\n      5: \"rgba(176, 75, 192, 1)\"\n    };\n    return colors[index];\n  }\n  main() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this5.titulosSeleccionados = _this5.seleccionService.obtenerTitulosSeleccionados();\n        console.log(\"TItulosselecc\");\n        console.log(_this5.titulosSeleccionados);\n        _this5.conferenceOption = _this5.seleccionService.obtenerOpcionConferencia();\n        _this5.venueName = _this5.seleccionService.obtenerNombreVenue();\n        _this5.obtenerPapers();\n        _this5.obtenerColaboraciones();\n        _this5.obtenerSingleAuthorPapers();\n        _this5.obtenerResearchers();\n        if (_this5.researchers.length == 0) {\n          yield _this5.esperarResearcherNoVacio();\n          _this5.obtenerDatosDemograficos();\n        } else {\n          _this5.obtenerDatosDemograficos();\n        }\n        if (_this5.papersWithAuthors.length == 0) {\n          yield _this5.esperarAuthorsWithPapersNoVacio();\n          _this5.obtenerTopicAnalisis();\n          _this5.obtenerDistribuciones();\n        } else {\n          _this5.obtenerTopicAnalisis();\n          _this5.obtenerDistribuciones();\n        }\n        if (_this5.singleAuthor.length == 0) {\n          yield _this5.esperarSingleAuthorsNoVacio();\n          _this5.decadeStats = _this5.statsProlificAuthors(_this5.yearsSeleccionados);\n          _this5.generarTablasDecadas(_this5.decadeStats);\n        } else {\n          _this5.decadeStats = _this5.statsProlificAuthors(_this5.yearsSeleccionados);\n          _this5.generarTablasDecadas(_this5.decadeStats);\n        }\n      } catch (error) {\n        console.error('Error al obtener los datos:', error);\n      }\n    })();\n  }\n  static #_ = this.ɵfac = function EstadisticasComponent_Factory(t) {\n    return new (t || EstadisticasComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.SeleccionService), i0.ɵɵdirectiveInject(i4.HttpClient));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EstadisticasComponent,\n    selectors: [[\"app-estadisticas\"]],\n    viewQuery: function EstadisticasComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.chartCanvas = _t.first);\n      }\n    },\n    decls: 137,\n    vars: 2,\n    consts: [[1, \"flex-container\"], [1, \"flex-item\"], [\"id\", \"lineChart1\"], [\"id\", \"lineChart2\"], [\"id\", \"lineChart3\"], [\"id\", \"barChart1\"], [1, \"line\"], [1, \"container\"], [1, \"tabla1\"], [\"id\", \"autoresTabla\", 1, \"centered-table\"], [1, \"tabla2\"], [\"id\", \"papersTabla\", 1, \"centered-table\"], [\"id\", \"lineChart4\"], [\"id\", \"lineChart5\"], [\"id\", \"tablaBigramas\"], [\"id\", \"tablaTrigramas\"], [1, \"conceptual\"], [3, \"config\", \"data\"], [\"id\", \"tabla90\", 1, \"centered-table\"], [\"colspan\", \"2\"], [1, \"line2\"], [\"id\", \"tabla00\", 1, \"centered-table\"], [\"id\", \"tabla10\", 1, \"centered-table\"], [\"id\", \"tabla20\", 1, \"centered-table\"]],\n    template: function EstadisticasComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"Estad\\u00EDsticas\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"body\")(3, \"div\", 0)(4, \"div\", 1);\n        i0.ɵɵelement(5, \"canvas\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 1);\n        i0.ɵɵelement(7, \"canvas\", 3);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 0)(9, \"div\", 1);\n        i0.ɵɵelement(10, \"canvas\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 1);\n        i0.ɵɵelement(12, \"canvas\", 5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(13, \"hr\", 6);\n        i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\", 8)(16, \"table\", 9)(17, \"thead\")(18, \"tr\")(19, \"th\");\n        i0.ɵɵtext(20, \"Autores\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"th\");\n        i0.ɵɵtext(22, \"Papers (%)\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(23, \"tbody\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(24, \"div\", 10)(25, \"table\", 11)(26, \"thead\")(27, \"tr\")(28, \"th\");\n        i0.ɵɵtext(29, \"Papers\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"th\");\n        i0.ɵɵtext(31, \"Autores (%)\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(32, \"tbody\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(33, \"hr\", 6);\n        i0.ɵɵelementStart(34, \"div\", 0)(35, \"div\", 1);\n        i0.ɵɵelement(36, \"canvas\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 0)(38, \"div\", 1);\n        i0.ɵɵelement(39, \"canvas\", 13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(40, \"hr\", 6);\n        i0.ɵɵelementStart(41, \"div\", 7)(42, \"div\", 8)(43, \"table\", 14)(44, \"thead\")(45, \"tr\")(46, \"th\");\n        i0.ɵɵtext(47, \"Bigrama\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"th\");\n        i0.ɵɵtext(49, \"Apariciones\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"th\");\n        i0.ɵɵtext(51, \"Primer \");\n        i0.ɵɵelement(52, \"br\");\n        i0.ɵɵtext(53, \" a\\u00F1o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"th\");\n        i0.ɵɵtext(55, \"\\u00DAltimo \");\n        i0.ɵɵelement(56, \"br\");\n        i0.ɵɵtext(57, \" a\\u00F1o\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(58, \"tbody\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(59, \"div\", 10)(60, \"table\", 15)(61, \"thead\")(62, \"tr\")(63, \"th\");\n        i0.ɵɵtext(64, \"Trigrama\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"th\");\n        i0.ɵɵtext(66, \"Apariciones\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(67, \"th\");\n        i0.ɵɵtext(68, \"Primer \");\n        i0.ɵɵelement(69, \"br\");\n        i0.ɵɵtext(70, \" a\\u00F1o\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(71, \"th\");\n        i0.ɵɵtext(72, \"\\u00DAltimo \");\n        i0.ɵɵelement(73, \"br\");\n        i0.ɵɵtext(74, \" a\\u00F1o\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(75, \"tbody\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(76, \"hr\", 6);\n        i0.ɵɵelementStart(77, \"div\", 16);\n        i0.ɵɵelement(78, \"angular-tag-cloud\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(79, \"hr\", 6);\n        i0.ɵɵelementStart(80, \"h4\");\n        i0.ɵɵtext(81, \"Autores m\\u00E1s prol\\u00EDficos de acuerdo a su n\\u00FAmero de publicaciones por d\\u00E9cada\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(82, \"div\", 7)(83, \"div\", 8)(84, \"table\", 18)(85, \"thead\")(86, \"tr\")(87, \"th\", 19);\n        i0.ɵɵtext(88, \" (a) 1989-1999 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(89, \"hr\", 20);\n        i0.ɵɵelementStart(90, \"tr\")(91, \"th\");\n        i0.ɵɵtext(92, \"Author\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(93, \"th\");\n        i0.ɵɵtext(94, \"#\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(95, \"tbody\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(96, \"div\", 10)(97, \"table\", 21)(98, \"thead\")(99, \"tr\")(100, \"th\", 19);\n        i0.ɵɵtext(101, \" (b) 1999-2009 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(102, \"hr\", 20);\n        i0.ɵɵelementStart(103, \"tr\")(104, \"th\");\n        i0.ɵɵtext(105, \"Author\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(106, \"th\");\n        i0.ɵɵtext(107, \"#\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(108, \"tbody\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(109, \"hr\", 6);\n        i0.ɵɵelementStart(110, \"div\", 7)(111, \"div\", 8)(112, \"table\", 22)(113, \"thead\")(114, \"tr\")(115, \"th\", 19);\n        i0.ɵɵtext(116, \" (a) 2009-2019 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(117, \"hr\", 20);\n        i0.ɵɵelementStart(118, \"tr\")(119, \"th\");\n        i0.ɵɵtext(120, \"Author\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(121, \"th\");\n        i0.ɵɵtext(122, \"#\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(123, \"tbody\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(124, \"div\", 10)(125, \"table\", 23)(126, \"thead\")(127, \"tr\")(128, \"th\", 19);\n        i0.ɵɵtext(129, \" (a) 2019-2029 \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(130, \"hr\", 20);\n        i0.ɵɵelementStart(131, \"tr\")(132, \"th\");\n        i0.ɵɵtext(133, \"Author\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(134, \"th\");\n        i0.ɵɵtext(135, \"#\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(136, \"tbody\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(78);\n        i0.ɵɵproperty(\"config\", ctx.options)(\"data\", ctx.cloudData);\n      }\n    },\n    dependencies: [i5.TagCloudComponent],\n    styles: [\"@charset \\\"UTF-8\\\";\\nh2[_ngcontent-%COMP%] {\\n  font-size: 35px;\\n  text-align: center;\\n  margin-bottom: 50px;\\n}\\n\\n.line[_ngcontent-%COMP%] {\\n  margin-top: 60px;\\n  margin-bottom: 60px;\\n  background-color: rgb(0, 22, 68);\\n}\\n\\n.line2[_ngcontent-%COMP%] {\\n  background-color: rgb(0, 22, 68);\\n}\\n\\n.flex-item[_ngcontent-%COMP%] {\\n  margin-bottom: 50px;\\n}\\n\\n.flex-container[_ngcontent-%COMP%] {\\n  display: block;\\n}\\n\\n.flex-item[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%] {\\n  max-width: 50%;\\n  border: 2px solid rgb(0, 22, 68);\\n  margin-left: 450px;\\n  padding: 20px;\\n}\\n\\n@media screen and (max-width: 1500px) {\\n  .flex-item[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%] {\\n    max-width: 100%;\\n    margin-left: 0;\\n  }\\n}\\n.container[_ngcontent-%COMP%] {\\n  width: 80%;\\n  margin: 0 auto;\\n  justify-content: center;\\n  display: flex;\\n  overflow: auto;\\n}\\n\\n.tabla1[_ngcontent-%COMP%] {\\n  border-right: 1px solid rgb(0, 22, 68);\\n  padding: 70px;\\n}\\n\\n.tabla2[_ngcontent-%COMP%] {\\n  margin-right: 70px;\\n  padding: 70px;\\n}\\n\\n.conceptual[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center; \\n\\n  align-items: center; \\n\\n  height: 200px; \\n\\n}\\n\\nh4[_ngcontent-%COMP%] {\\n  text-align: center;\\n  font-size: 25px;\\n  margin-bottom: 50px;\\n}\\n\\ntable[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n  border-collapse: collapse;\\n  max-width: 100%;\\n  text-align: center;\\n}\\n\\ntd[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  vertical-align: middle;\\n  text-align: center;\\n}\\n\\n.centered-table[_ngcontent-%COMP%] {\\n  margin: 0 auto;\\n}\\n\\ntable[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:nth-child(2) {\\n  padding-left: 0px;\\n}\\n\\n@media screen and (max-width: 768px) {\\n  table[_ngcontent-%COMP%] {\\n    font-size: 14px; \\n\\n  }\\n  td[_ngcontent-%COMP%], th[_ngcontent-%COMP%] {\\n    padding: 8px; \\n\\n  }\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZXN0YWRpc3RpY2FzL2VzdGFkaXN0aWNhcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDRSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSxtQkFBQTtBQUVGOztBQUNBO0VBQ0UsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGdDQUFBO0FBRUY7O0FBQ0E7RUFDRSxnQ0FBQTtBQUVGOztBQUNBO0VBQ0UsbUJBQUE7QUFFRjs7QUFDQTtFQUNFLGNBQUE7QUFFRjs7QUFDQTtFQUNFLGNBQUE7RUFDQSxnQ0FBQTtFQUNBLGtCQUFBO0VBQ0EsYUFBQTtBQUVGOztBQUVBO0VBQ0U7SUFDRSxlQUFBO0lBQ0EsY0FBQTtFQUNGO0FBQ0Y7QUFFQTtFQUNFLFVBQUE7RUFDQSxjQUFBO0VBQ0EsdUJBQUE7RUFDQSxhQUFBO0VBQ0EsY0FBQTtBQUFGOztBQUdBO0VBQ0Usc0NBQUE7RUFDQSxhQUFBO0FBQUY7O0FBR0E7RUFDRSxrQkFBQTtFQUNBLGFBQUE7QUFBRjs7QUFHQTtFQUNFLGFBQUE7RUFDQSx1QkFBQSxFQUFBLHNDQUFBO0VBQ0EsbUJBQUEsRUFBQSxvQ0FBQTtFQUNBLGFBQUEsRUFBQSxxQ0FBQTtBQUFGOztBQUdBO0VBQ0Usa0JBQUE7RUFDQSxlQUFBO0VBQ0EsbUJBQUE7QUFBRjs7QUFJQTtFQUNJLGVBQUE7RUFDQSx5QkFBQTtFQUNBLGVBQUE7RUFDQSxrQkFBQTtBQURKOztBQUlBO0VBQ0ksYUFBQTtFQUNBLHNCQUFBO0VBQ0Esa0JBQUE7QUFESjs7QUFJQTtFQUNFLGNBQUE7QUFERjs7QUFJQTtFQUNFLGlCQUFBO0FBREY7O0FBSUE7RUFDRTtJQUNFLGVBQUEsRUFBQSwrREFBQTtFQURGO0VBSUE7SUFDRSxZQUFBLEVBQUEscUVBQUE7RUFGRjtBQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaDJ7XG4gIGZvbnQtc2l6ZTogMzVweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiA1MHB4O1xufVxuXG4ubGluZXtcbiAgbWFyZ2luLXRvcDogNjBweDtcbiAgbWFyZ2luLWJvdHRvbTogNjBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDAsIDIyLCA2OCk7XG59XG5cbi5saW5lMntcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDAsIDIyLCA2OCk7XG59XG5cbi5mbGV4LWl0ZW17XG4gIG1hcmdpbi1ib3R0b206IDUwcHg7XG59XG5cbi5mbGV4LWNvbnRhaW5lciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4uZmxleC1pdGVtIGNhbnZhcyB7XG4gIG1heC13aWR0aDogNTAlOyBcbiAgYm9yZGVyOiAycHggc29saWQgcmdiKDAsIDIyLCA2OCk7IFxuICBtYXJnaW4tbGVmdDogNDUwcHg7XG4gIHBhZGRpbmc6IDIwcHg7XG5cbn1cblxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogMTUwMHB4KSB7XG4gIC5mbGV4LWl0ZW0gY2FudmFzIHtcbiAgICBtYXgtd2lkdGg6IDEwMCU7IFxuICAgIG1hcmdpbi1sZWZ0OiAwO1xuICB9XG59XG5cbi5jb250YWluZXIge1xuICB3aWR0aDogODAlO1xuICBtYXJnaW46IDAgYXV0bzsgXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyOyBcbiAgZGlzcGxheTogZmxleDtcbiAgb3ZlcmZsb3c6IGF1dG87XG59XG5cbi50YWJsYTF7XG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYigwLCAyMiwgNjgpOyBcbiAgcGFkZGluZzogNzBweDtcbn1cblxuLnRhYmxhMntcbiAgbWFyZ2luLXJpZ2h0OiA3MHB4O1xuICBwYWRkaW5nOiA3MHB4O1xufVxuXG4uY29uY2VwdHVhbCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyOyAvKiBBbGluZWFyIGhvcml6b250YWxtZW50ZSBhbCBjZW50cm8gKi9cbiAgYWxpZ24taXRlbXM6IGNlbnRlcjsgLyogQWxpbmVhciB2ZXJ0aWNhbG1lbnRlIGFsIGNlbnRybyAqL1xuICBoZWlnaHQ6IDIwMHB4OyAvKiBBanVzdGEgbGEgYWx0dXJhIHNpIGVzIG5lY2VzYXJpbyAqL1xufVxuXG5oNHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IDI1cHg7XG4gIG1hcmdpbi1ib3R0b206IDUwcHg7XG59XG5cblxudGFibGUge1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbnRkLCB0aCB7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmNlbnRlcmVkLXRhYmxlIHtcbiAgbWFyZ2luOiAwIGF1dG87XG59XG5cbnRhYmxlIHRoOm50aC1jaGlsZCgyKSB7XG4gIHBhZGRpbmctbGVmdDogMHB4O1xufVxuXG5AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA3NjhweCkge1xuICB0YWJsZSB7XG4gICAgZm9udC1zaXplOiAxNHB4OyAvKiBSZWR1Y2Npw4PCs24gZGVsIHRhbWHDg8KxbyBkZSBmdWVudGUgcGFyYSBwYW50YWxsYXMgbcODwqFzIHBlcXVlw4PCsWFzICovXG4gIH1cblxuICB0ZCwgdGgge1xuICAgIHBhZGRpbmc6IDhweDsgLyogUmVkdWNjacODwrNuIGRlbCBlc3BhY2lhZG8gZW50cmUgY2VsZGFzIHBhcmEgcGFudGFsbGFzIG3Dg8KhcyBwZXF1ZcODwrFhcyAqL1xuICB9XG59XG5cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["Chart","registerables","singular","register","EstadisticasComponent","constructor","route","apiService","seleccionService","http","titulosSeleccionados","yearsSeleccionados","conferenceOption","venueName","papers","colaboraciones","singleAuthor","estadisticas","researchers","papersWithAuthors","autoresPorPapersTable","papersPorAutoresTable","decadeStats","commonNames","options","width","height","overflow","realignOnResize","strict","step","cloudData","loadCommonNames","get","responseType","subscribe","data","parseCommonNames","error","console","lineas","split","diccionario","nombreActual","datosActuales","frec_paises","genero","linea","startsWith","trim","frec_paisesStr","substring","indexOf","lastIndexOf","JSON","parse","ngOnInit","main","ngAfterViewInit","esperarResearcherNoVacio","_this","_asyncToGenerator","length","Promise","resolve","setTimeout","obtenerResearchers","next","response","statsResearchers","generarGrafico3","anios","numResearchers","obtenerPapers","statsPapers","numPapers","obtenerColaboraciones","statsColaboraciones","densidades","obtenerInstituciones","esperarAuthorsWithPapersNoVacio","_this2","esperarSingleAuthorsNoVacio","_this3","obtenerSingleAuthorPapers","_this4","obtenerAuthorsPapers","_ref","statsSingleAuthor","generarGraficoBarras","porcentajes","_x","apply","arguments","obtenerDistribuciones","log","labels","autoresPorPaper","map","numAuthors","filter","paper","totalPapers","reduce","total","papersPorAutor","numPubs","numPublications","totalAutores","autoresTabla","document","querySelector","papersTabla","forEach","cantidad","index","row","createElement","porcentaje","toFixed","valor","toString","innerHTML","appendChild","obtenerDatosDemograficos","datasets","researcher","nombre","properties","name","includes","Array","isArray","years","datasetPorAnio","year","info","frecuencias","flat","statsGenero","statsGeografia","generarNGrams","titles","n","ngrams","title","words","toLowerCase","i","push","slice","join","countFrequencies","frequencies","Map","ngram","count","set","limpiarTitulo","titulo","stopwords","palabras","palabra","replace","palabrasSinRepetir","palabrasSingulares","palabrasFiltradas","nuevoTitulo","getTopN","sortedFrequencies","entries","sort","a","b","obtenerTopicAnalisis","titulosLimpios","ipName","parseInt","bigrams","trigrams","bigramFrequencies","trigramFrequencies","top20Bigrams","top20Trigrams","top20BigramsWithYears","top20TrigramsWithYears","table1","table2","HTMLElement","minYear","Math","min","maxYear","max","combinedData","maxFrecuencia","minWeight","maxWeight","wordCloudData","item","text","weight","calcularWeight","color","randomColor","frecuencia","peso","pesoNormalizado","round","numResearchersPorAnio","anio","statsInstitutions","colabsXtotal","colab","find","c","numColabs","densidad","dato","author","ipNames","paperIndex","findIndex","authorNames","papersWithOneAuthor","porcentajeByYear","numPapersWithSingleAuthor","datasetsPorGenero","genderKey","existingData","d","datosOrdenados","hombres","mujeres","conteo","aniosOrdenados","Object","keys","conteosHombres","Number","conteosMujeres","generarGraficoCircular","chartId","datasetsLabels","datasetsData","backgroundColors","label","backgroundColor","chartConfig","type","plugins","legend","display","position","ctx","getElementById","mapeoFecha","datasetFiltrado","objeto","fechasUnicas","Set","fecha","objetosFecha","paisMasAlto","frecuenciaMasAlta","pais","country","countries","generarGraficoMultiple","filterAuthorsByDecade","authors","startYear","endYear","filteredAuthors","authorYears","existingAuthor","filteredAuthor","statsProlificAuthors","selectedYears","startDecade","floor","endDecade","decades","decade","decadeLabel","decadeStartYear","decadeEndYear","decadeAuthors","generarTablasDecadas","tablas","decada","tabla","autor","idChart","lineChart","fill","borderColor","borderWidth","font","size","family","scales","y","getRandomColor","barChart","beginAtZero","r","random","g","colors","_this5","obtenerTitulosSeleccionados","obtenerOpcionConferencia","obtenerNombreVenue","_","i0","ɵɵdirectiveInject","i1","ActivatedRoute","i2","ApiService","i3","SeleccionService","i4","HttpClient","_2","selectors","viewQuery","EstadisticasComponent_Query","rf","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty"],"sources":["/home/miguel/Analizador_Redes_Colaboracion/interfaz/src/app/estadisticas/estadisticas.component.ts","/home/miguel/Analizador_Redes_Colaboracion/interfaz/src/app/estadisticas/estadisticas.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild, ElementRef, AfterViewInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from '../api.service';\nimport { SeleccionService } from '../seleccion.service';\n//import { Chart, CategoryScale, LineController  } from 'chart.js';\nimport { Chart, registerables } from 'chart.js';\nChart.register(...registerables);\nimport { HttpClient } from '@angular/common/http';\nimport { Observable, catchError, map, tap, throwError } from 'rxjs';\nimport { CloudData, CloudOptions } from 'angular-tag-cloud-module';\nimport { singular } from 'pluralize';\nimport { ChartConfiguration, ChartData, ChartOptions } from 'chart.js';\n\ninterface Author {\n  ipNames: string[];\n  numPublications: number;\n  researcher: string;\n  year: string;\n}\n\ninterface DecadeStats {\n  label: string;\n  startYear: number;\n  endYear: number;\n  authors: Author[];\n}\n\ninterface GeneroCounts {\n  hombres: number;\n  mujeres: number;\n  desconocidos: number;\n}\n\ninterface GeneroData {\n  [anio: string]: GeneroCounts;\n}\n\n\n@Component({\n  selector: 'app-estadisticas',\n  templateUrl: './estadisticas.component.html',\n  styleUrls: ['./estadisticas.component.scss'],\n  template: `\n    <div>\n      <angular-tag-cloud\n        [data]=\"data\"\n        [width]=\"options.width\"\n        [height]=\"options.height\"\n        [overflow]=\"options.overflow\">\n      </angular-tag-cloud>\n    </div>\n  `\n})\nexport class EstadisticasComponent implements OnInit, AfterViewInit {\n  @ViewChild('chartCanvas') chartCanvas!: ElementRef;\n\n  titulosSeleccionados: any[] = [];\n  yearsSeleccionados: any[] = [];\n  conferenceOption: string = \"\";\n  venueName: string = \"\";\n  papers: any[] = [];\n  colaboraciones: any[] = [];\n  singleAuthor: any[] = [];\n  estadisticas: any[] = [];\n  lineChart!: Chart;\n  barChart!: Chart;\n  researchers: any[] = [];\n  papersWithAuthors: any[] = [];\n  autoresPorPapersTable: any[] = [];\n  papersPorAutoresTable: any[] = [];\n  decadeStats: any[] = [];\n  commonNames: { [key: string]: { frec_paises: { [key: string]: number }, genero: string } } = {};\n  options: CloudOptions = {\n    // if width is between 0 and 1 it will be set to the width of the upper element multiplied by the value\n    width: 500,\n    // if height is between 0 and 1 it will be set to the height of the upper element multiplied by the value\n    height: 200,\n    overflow: false,\n    realignOnResize: false,\n    strict: false,\n    step: 2,\n  };\n  cloudData: CloudData[] = []\n\n  constructor(\n    private route: ActivatedRoute,\n    private apiService: ApiService,\n    private seleccionService: SeleccionService,\n    private http: HttpClient\n  ) {}\n\n  loadCommonNames() {\n    this.http.get('assets/common_names.txt', { responseType: 'text' }).subscribe(\n      (data: string) => {\n        this.commonNames = this.parseCommonNames(data);\n      },\n      (error: any) => {\n        console.error('Error al cargar los datos:', error);\n      }\n    );\n  }\n\n  parseCommonNames(data: string) {\n    const lineas = data.split('\\n');\n    const diccionario: { [key: string]: { frec_paises: { [key: string]: number }, genero: string } } = {};\n    let nombreActual = '';\n    let datosActuales: { frec_paises: { [key: string]: number }, genero: string } = {\n      frec_paises: {},\n      genero: ''\n    };\n  \n    for (const linea of lineas) {\n      if (linea.startsWith('nombre:')) {\n        nombreActual = linea.split(':')[1].trim();\n        datosActuales = { frec_paises: {}, genero: '' };\n      } else if (linea.startsWith('frec_paises:')) {\n        const frec_paisesStr = linea.substring(linea.indexOf('{'), linea.lastIndexOf('}') + 1);\n        const frec_paises = JSON.parse(frec_paisesStr);\n        datosActuales.frec_paises = frec_paises;\n      } else if (linea.startsWith('genero:')) {\n        datosActuales.genero = linea.split(':')[1].trim();\n      } else if (linea.trim() === '') {\n        diccionario[nombreActual] = datosActuales;\n      }\n    }\n    return diccionario;\n  }\n\n  ngOnInit() {\n    this.loadCommonNames();\n    //LLamada a la funcion principal para la ejecucion de todo\n    this.main();\n  }\n\n  ngAfterViewInit() {\n    // Este método se ejecutará después de que Angular haya inicializado la vista\n    // Perfe para realizar cualquier manipulación adicional del DOM relacionada con el gráfico\n    // como ajustes de estilo, cambios dinámicos en los datos, etc.\n  }\n\n  async esperarResearcherNoVacio() {\n    while (!this.researchers || this.researchers.length === 0) {\n      await new Promise(resolve => setTimeout(resolve, 100)); \n    }\n  }\n\n  obtenerResearchers() {\n    this.apiService.obtenerResearchers(this.titulosSeleccionados).subscribe({\n      next: (response: any) => {\n        this.researchers = response;\n        this.statsResearchers();\n        this.generarGrafico3('lineChart1', 'Número de investigadores', this.estadisticas[0].anios, this.estadisticas[0].numResearchers);\n      },\n      error: (error: any) => {\n        console.error('Error al obtener los researchers:', error);\n      }\n    });\n  }\n\n  obtenerPapers() {\n    this.apiService.obtenerPapers(this.titulosSeleccionados, this.conferenceOption, this.venueName).subscribe({\n      next: (response: any) => {\n        this.papers = response;\n        this.statsPapers();\n        this.generarGrafico3('lineChart2', 'Número de papers', this.estadisticas[1].anios, this.estadisticas[1].numPapers);\n      },\n      error: (error: any) => {\n        console.error('Error al obtener los papers:', error);\n      }\n    });\n  }\n\n\n  obtenerColaboraciones() {\n    this.apiService.obtenerColaboraciones(this.titulosSeleccionados, this.conferenceOption, this.venueName).subscribe({\n      next: (response: any) => {\n        this.colaboraciones = response;\n        this.statsColaboraciones();\n        this.generarGrafico3('lineChart3', 'Densidad', this.estadisticas[3].anios, this.estadisticas[3].densidades);\n      },\n      error: (error: any) => {\n        console.error('Error al obtener las colaboraciones:', error);\n      }\n    });\n  }\n\n  obtenerInstituciones(){\n    // que son las instituciones?\n  }\n\n  async esperarAuthorsWithPapersNoVacio(){\n    while (!this.papersWithAuthors || this.papersWithAuthors.length === 0) {\n      await new Promise(resolve => setTimeout(resolve, 100)); \n    }\n  }\n\n  async esperarSingleAuthorsNoVacio(){\n    while (!this.singleAuthor || this.singleAuthor.length === 0) {\n      await new Promise(resolve => setTimeout(resolve, 100)); \n    }\n  }\n\n  obtenerSingleAuthorPapers() {\n      this.apiService.obtenerAuthorsPapers(this.titulosSeleccionados, this.conferenceOption, this.venueName)\n        .subscribe({\n          next: async (response: any) => {\n            this.singleAuthor = response;\n            this.statsSingleAuthor();\n            this.generarGraficoBarras('barChart1', 'Single Author Papers', this.estadisticas[4].anios, this.estadisticas[4].porcentajes);          \n          },\n          error: (error: any) => {\n            console.error('Error al obtener los Author Papers:', error);\n          }\n        });\n  }\n\n  /**\n   * Función para obtener las distribuciones tanto de autores por papers como de papers por autores\n   */\n  obtenerDistribuciones(){\n    console.log(\"distribuciones antes o despues?\");\n    const labels: string[] = ['1', '2', '3', '4', '5 o más'];\n\n    // Este representa el número de autores que tiene cada paper\n    const autoresPorPaper: number[] = [1, 2, 3, 4].map((numAuthors) =>\n    this.papersWithAuthors.filter((paper) => paper.numAuthors === numAuthors).length\n    );\n    autoresPorPaper[4] = this.papersWithAuthors.filter((paper) => paper.numAuthors >= 5).length;\n    let totalPapers = this.papers.reduce((total, paper) => total + paper.numPapers, 0);\n\n    // Ese representa el número de papers publicados que tiene cada autor\n    const papersPorAutor: number[] = [1, 2, 3, 4].map((numPubs) =>\n    this.singleAuthor.filter((paper) => paper.numPublications === numPubs).length\n    );\n    papersPorAutor[4] = this.singleAuthor.filter((paper) => paper.numPublications >= 5).length\n    const totalAutores = this.singleAuthor.length;\n\n    // Creamos las dos tablas que se vinculan con los ids del html\n    const autoresTabla = document.querySelector('#autoresTabla tbody');\n    const papersTabla = document.querySelector('#papersTabla tbody');\n    \n    if (autoresTabla !== null) {\n      autoresPorPaper.forEach((cantidad, index) => {\n        const row = document.createElement('tr');\n        const porcentaje = (cantidad / totalPapers * 100).toFixed(2);\n        const valor = cantidad.toString() + \"(\" + porcentaje + \")\";\n        row.innerHTML = `<td>${labels[index]}</td><td>${valor}</td>`;\n        autoresTabla.appendChild(row);\n      });\n    }\n\n    if (papersTabla !== null) {\n      papersPorAutor.forEach((cantidad, index) => {\n        const row = document.createElement('tr');\n        const porcentaje = (cantidad / totalAutores * 100).toFixed(2);\n        const valor = cantidad.toString() + \"(\" + porcentaje + \")\";\n        row.innerHTML = `<td>${labels[index]}</td><td>${valor}</td>`;\n        papersTabla.appendChild(row);\n      });\n    }\n  }\n\n  obtenerDatosDemograficos(){\n    console.log(\"demograficos antes o despues?\");\n      const datasets = this.researchers.map(researcher => {\n        let nombre = researcher.researcher.properties.name.split(' ')[0];\n        if(nombre.includes(\"-\")){\n          nombre = nombre.split('-')[0];\n        }\n        const anios = Array.isArray(researcher.years) ? researcher.years : [researcher.years];\n      \n        const datasetPorAnio = anios.map((year: any) => {\n          const info = this.commonNames[nombre];\n          const genero = info ? info.genero : 'Desconocido';\n          const frecuencias = info ? info.frec_paises : {};\n      \n          return {\n            year,\n            nombre,\n            genero,\n            frecuencias\n          };\n        });\n        return datasetPorAnio;\n      }).flat(); \n\n      console.log(\"datasets en demogr\");\n      console.log(datasets);\n\n      this.statsGenero(datasets);\n      this.statsGeografia(datasets);\n  }\n\n  generarNGrams(titles: string[], n: number): string[] {\n    const ngrams: string[] = [];\n    titles.forEach((title) => {\n      const words = title.toLowerCase().split(\" \");\n      for (let i = 0; i < words.length - n + 1; i++) {\n        ngrams.push(words.slice(i, i + n).join(\" \"));\n      }\n    });\n    return ngrams;\n  }\n  \n  countFrequencies(ngrams: string[]): Map<string, number> {\n    const frequencies = new Map<string, number>();\n    ngrams.forEach((ngram) => {\n      const count = frequencies.get(ngram) || 0;\n      frequencies.set(ngram, count + 1);\n    });\n    return frequencies;\n  }\n\n  limpiarTitulo(titulo: string, stopwords: string[]) {\n    // Separar el título en palabras\n    const palabras = titulo.toLowerCase().split(\" \").map(palabra => palabra.replace(/[^\\w\\s]/g, \"\"));\n\n    // Eliminamos repeticiones de letras y plurales para hacer mejor la frecuencia\n    const palabrasSinRepetir = palabras.map(palabra => palabra.replace(/(.)\\1+/g, \"$1\"));\n    const palabrasSingulares = palabrasSinRepetir.map(palabra => singular(palabra));\n    \n    // Filtrar las palabras para eliminar las stopwords\n    const palabrasFiltradas = palabrasSingulares.filter(palabra => !stopwords.includes(palabra));\n  \n    // Unir las palabras filtradas en un nuevo título\n    const nuevoTitulo = palabrasFiltradas.join(' ');\n  \n    return nuevoTitulo;\n  }\n\n  getTopN(frequencies: Map<string, number>, n: number): [string, number][] {\n    const sortedFrequencies = [...frequencies.entries()].sort((a, b) => b[1] - a[1]);\n    return sortedFrequencies.slice(0, n);\n  }\n\n  obtenerTopicAnalisis(){\n\n      // Requerimos natural para tokenizar y eliminar las stopwords, y calcular frecuencias\n      const stopwords = ['i', 'me', 'my', 'myself', 'we', 'our', 'ours', 'ourselves', 'you', 'your', 'yours', 'yourself', 'yourselves', 'he', 'him', 'his', 'himself', 'she', 'her', 'hers', 'herself', 'it', 'its', 'itself', 'they', 'them', 'their', 'theirs', 'themselves', 'what', 'which', 'who', 'whom', 'this', 'that', 'these', 'those', 'am', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'have', 'has', 'had', 'having', 'do', 'does', 'did', 'doing', 'a', 'an', 'the', 'and', 'but', 'if', 'or', 'because', 'as', 'until', 'while', 'of', 'at', 'by', 'for', 'with', 'about', 'against', 'between', 'into', 'through', 'during', 'before', 'after', 'above', 'below', 'to', 'from', 'up', 'down', 'in', 'out', 'on', 'off', 'over', 'under', 'again', 'further', 'then', 'once', 'here', 'there', 'when', 'where', 'why', 'how', 'all', 'any', 'both', 'each', 'few', 'more', 'most', 'other', 'some', 'such', 'no', 'nor', 'not', 'only', 'own', 'same', 'so', 'than', 'too', 'very', 's', 't', 'can', 'will', 'just', 'don', 'should', 'now', '.', ','];\n\n      const titulosLimpios = this.papersWithAuthors.map(paper => {\n        const ipName = this.limpiarTitulo(paper.ipName, stopwords);\n        const year = parseInt(paper.year);\n        return { ipName, year };\n      });\n\n      const bigrams = this.generarNGrams(titulosLimpios.map((paper) => paper.ipName), 2);\n      const trigrams = this.generarNGrams(titulosLimpios.map((paper) => paper.ipName), 3);\n\n      const bigramFrequencies = this.countFrequencies(bigrams);\n      const trigramFrequencies = this.countFrequencies(trigrams);\n\n      const top20Bigrams = this.getTopN(bigramFrequencies, 20);\n      const top20Trigrams = this.getTopN(trigramFrequencies, 20);\n\n    \n      const top20BigramsWithYears = top20Bigrams.map(([ngram, count]) => ({\n        ngram,\n        count,\n        years: titulosLimpios.filter((paper) => paper.ipName.includes(ngram)).map((paper) => paper.year),\n      }));\n    \n      const top20TrigramsWithYears = top20Trigrams.map(([ngram, count]) => ({\n        ngram,\n        count,\n        years: titulosLimpios.filter((paper) => paper.ipName.includes(ngram)).map((paper) => paper.year),\n      }));\n\n      const table1 = document.querySelector('#tablaBigramas tbody');\n      const table2 = document.querySelector('#tablaTrigramas tbody');\n    \n      if (table1 instanceof HTMLElement && table2 instanceof HTMLElement) {\n        top20BigramsWithYears.forEach(({ ngram, count, years }) => {\n          const minYear = Math.min(...years);\n          const maxYear = Math.max(...years);\n      \n          const row = document.createElement('tr');\n          row.innerHTML = `<td>${ngram}</td><td>${count}</td><td>${minYear}</td><td>${maxYear}</td>`;\n      \n          table1.appendChild(row);\n        });\n      \n        top20TrigramsWithYears.forEach(({ ngram, count, years }) => {\n          const minYear = Math.min(...years);\n          const maxYear = Math.max(...years);\n      \n          const row = document.createElement('tr');\n          row.innerHTML = `<td>${ngram}</td><td>${count}</td><td>${minYear}</td><td>${maxYear}</td>`;\n      \n          table2.appendChild(row);\n        });\n      }\n\n      const combinedData = [...top20BigramsWithYears, ...top20TrigramsWithYears];\n      \n      combinedData.sort((a, b) => b.count - a.count);\n\n      const maxFrecuencia = combinedData[0].count;\n      const minWeight = 0;\n      const maxWeight = 20;\n\n\n      const wordCloudData = combinedData.map((item, index) => ({\n        text: item.ngram,\n        weight: this.calcularWeight(item.count, maxFrecuencia, minWeight, maxWeight),\n        color: this.randomColor()\n      }));\n\n      console.log(\"wordcloud data\");\n      console.log(wordCloudData);\n\n      this.cloudData = wordCloudData;\n     \n  }\n\n  calcularWeight(frecuencia: number, maxFrecuencia: number, minWeight: number, maxWeight: number): number {\n    const peso = frecuencia / maxFrecuencia;\n    const pesoNormalizado = peso * (maxWeight - minWeight) + minWeight;\n    return Math.round(pesoNormalizado);\n  }\n\n  /**\n   * ############################################\n   */\n\n  statsResearchers() {\n    const numResearchers = this.researchers.length;\n    const anios = this.titulosSeleccionados.map(titulo => titulo.properties.name);\n    this.yearsSeleccionados = anios;\n\n    const numResearchersPorAnio = anios.map(anio =>\n      this.researchers.filter(researcher => researcher.years.includes(anio)).length\n    );\n    console.log(\"this.reserrchers\");\n    console.log(this.researchers);\n    this.estadisticas[0] = {\n      anios: anios,\n      numResearchers: numResearchersPorAnio\n    };\n  }\n\n  statsPapers() {\n    const anios = this.papers.map(paper => paper.year); // Extraer los años de this.numPapers\n    const numPapers = this.papers.map(paper => paper.numPapers); \n    \n    console.log(\"this.papers en stats papers\");\n    console.log(this.papers);\n\n    this.estadisticas[1] = {\n      anios: anios,\n      numPapers: numPapers\n    };\n  }  \n  \n  statsInstitutions() {\n    const anios = this.papers.map(paper => paper.year); \n    // Extraer los años de this.numPapers\n    // const numPapers = this.papers.map(paper => paper.numPapers); \n\n    this.estadisticas[2] = {\n      anios: anios,\n      numPapers: anios\n    };\n  }\n\n  statsColaboraciones(){    \n    const colabsXtotal = this.papers.map(paper => {\n      const colab = this.colaboraciones.find(c => c.year === paper.year);\n      return {\n        year: paper.year,\n        numColabs: colab ? colab.numColabs : 0,\n        numPapers: paper.numPapers\n      };\n    });\n\n    const densidad = colabsXtotal.map(dato => {\n      const { year, numColabs, numPapers } = dato;\n      const densidad = numColabs / numPapers;\n      return { densidad, year };\n    });\n\n    this.estadisticas[3] = {\n      anios: densidad.map(dato => dato.year),\n      densidades: densidad.map(dato => dato.densidad)\n    };\n  }\n\n  statsSingleAuthor() {\n    \n    const papersWithAuthors: { ipName: string, numAuthors: number, authorNames: string[], year: string }[] = [];\n\n    // Mapea todos los researchers, para crear papersWithAuthors, que es un array que tiene el nombre de una publicacion\n    // y los autores que han contribuido él.\n    this.singleAuthor.forEach((author: { ipNames: string[], researcher: string, year: string }) => {\n      author.ipNames.forEach(ipName => {\n        const paperIndex = papersWithAuthors.findIndex(paper => paper.ipName === ipName);\n        if (paperIndex !== -1) {\n          papersWithAuthors[paperIndex].numAuthors++;\n          papersWithAuthors[paperIndex].authorNames.push(author.researcher);\n        } else {\n            papersWithAuthors.push({\n              ipName,\n              numAuthors: 1,\n              authorNames: [author.researcher],\n              year: author.year\n            });\n          }\n        });\n    });\n\n    this.papersWithAuthors = papersWithAuthors;\n\n    // Conseguimos todas las entradas cuyo autor sea uno, para las estadisticas\n    const papersWithOneAuthor = papersWithAuthors.filter(paper => paper.numAuthors === 1);\n\n    const porcentajeByYear = this.papers.map(paper => {\n      const year = paper.year;\n      const numPapers = paper.numPapers;\n      const numPapersWithSingleAuthor = papersWithOneAuthor.filter(paper => paper.year === year).length;\n      const porcentaje = (numPapersWithSingleAuthor / numPapers) * 100;\n    \n      return { year, porcentaje };\n    });\n    \n    this.estadisticas[4] = {\n      anios: porcentajeByYear.map(dato => dato.year),\n      porcentajes: porcentajeByYear.map(dato => dato.porcentaje)\n    };\n  }  \n\n\n  statsGenero(datasets: any[]){\n    const datasetsPorGenero: { [genero: string]: { year: string; count: number }[] } = {};\n\n      datasets.forEach((data: { year: any; genero: any; }) => {\n        const { year, genero } = data;\n        \n        let genderKey = '';\n        \n        if (genero == 'M' || genero == '?M' || genero == '1M' || genero == '?') {\n          genderKey = 'Hombres';\n        } else if (genero == 'F' || genero == '?F' || genero == '1F') {\n          genderKey = 'Mujeres';\n        } else{\n          genderKey = 'Desconocido';\n        }\n        \n        if (!datasetsPorGenero[genderKey]) {\n          datasetsPorGenero[genderKey] = [];\n        }\n        \n        const existingData = datasetsPorGenero[genderKey].find(d => d.year === year);\n        \n        if (existingData) {\n          existingData.count++;\n        } else {\n          datasetsPorGenero[genderKey].push({\n            year,\n            count: 1\n          });\n        }\n      });\n\n      // Crear un objeto para almacenar los datos ordenados\n      const datosOrdenados: { [anio: string]: { hombres: number; mujeres: number; total: number} } = {};\n      const hombres = datasetsPorGenero['Hombres'];\n      const mujeres = datasetsPorGenero['Mujeres'];\n\n      // Ordenar los datos de hombres\n      hombres.forEach(dato => {\n        const anio = dato.year;\n        const conteo = dato.count;\n\n        datosOrdenados[anio] = { hombres: conteo, mujeres: 0, total: conteo };\n      });\n\n      // Ordenar los datos de mujeres y combinarlos con los datos de hombres\n      mujeres.forEach(dato => {\n        const anio = dato.year;\n        const conteo = dato.count;\n\n        if (datosOrdenados[anio]) {\n          datosOrdenados[anio].mujeres = conteo;\n          datosOrdenados[anio].total += conteo;\n        } else {\n          datosOrdenados[anio] = { mujeres: conteo, hombres: 0, total: conteo };\n        }\n      });\n\n      console.log(\"datos ordenados\");\n      console.log(datosOrdenados);\n\n      // Obtener los años ordenados\n      const aniosOrdenados = Object.keys(datosOrdenados).sort();\n\n\n      const conteosHombres = aniosOrdenados.map(anio => Number((datosOrdenados[anio].hombres/(datosOrdenados[anio].total)).toFixed(4)));\n      const conteosMujeres = aniosOrdenados.map(anio => Number((datosOrdenados[anio].mujeres/(datosOrdenados[anio].total)).toFixed(4)));\n\n      console.log(\"conteos hombres\");\n      console.log(conteosHombres);\n\n      \n      this.generarGraficoCircular('lineChart4', aniosOrdenados, ['Hombres', 'Mujeres'], [conteosHombres, conteosMujeres]);\n\n  }\n\n  generarGraficoCircular(chartId: string, labels: string[], datasetsLabels: string[], datasetsData: number[][]) {\n    const backgroundColors = datasetsLabels.map((label, index) => {\n      return label.toLowerCase() === 'hombres' ? 'blue' : 'red';\n    });\n  \n    const datasets = datasetsLabels.map((label, index) => ({\n      label: label,\n      data: datasetsData[index],\n      backgroundColor: backgroundColors[index],\n    }));\n  \n    const chartConfig: ChartConfiguration<'pie'> = {\n      type: 'pie',\n      data: {\n        labels: datasetsLabels, // Utiliza las etiquetas de los conjuntos de datos (Hombres, Mujeres)\n        datasets: datasets,\n      },\n      options: {\n        plugins: {\n          legend: {\n            display: true,\n            position: 'top',\n          },\n        },\n      },\n    };\n  \n    const ctx = document.getElementById(chartId) as HTMLCanvasElement;\n    new Chart(ctx, chartConfig);\n  }\n  \n\n  statsGeografia(datasets: any[]){\n    const mapeoFecha: {[fecha: string]: {[pais: string]: number}} = {};\n    const datasetFiltrado = datasets.filter((objeto: any) => Object.keys(objeto.frecuencias).length > 0);\n    \n    // Obtener todas las fechas únicas\n    const fechasUnicas = [...new Set(datasetFiltrado.map(dato => dato.year))];\n\n    // Iterar sobre las fechas\n    for (const fecha of fechasUnicas) {\n      const objetosFecha = datasetFiltrado.filter(dato => dato.year === fecha);\n\n      // Crear objeto de mapeo para la fecha actual\n      mapeoFecha[fecha] = {};\n  \n    for (const objeto of objetosFecha) {\n      let paisMasAlto = '';\n      let frecuenciaMasAlta = -1;\n\n      for (const pais in objeto.frecuencias) {\n          if (objeto.frecuencias[pais] > frecuenciaMasAlta) {\n            paisMasAlto = pais;\n            frecuenciaMasAlta = objeto.frecuencias[pais];\n          }\n        }\n        if(!(paisMasAlto in mapeoFecha[fecha])){\n          mapeoFecha[fecha][paisMasAlto] = 1;\n        }else{\n          mapeoFecha[fecha][paisMasAlto] = mapeoFecha[fecha][paisMasAlto] + 1;\n        }\n      }\n    }\n\n    console.log(\"mapeoFecha antes\");\n    console.log(mapeoFecha);\n\n    // Normalizamos valores según su total\n    for (const year in mapeoFecha) {\n      let total = 0;\n      for (const country in mapeoFecha[year]) {\n        total += mapeoFecha[year][country];\n      }\n      for (const country in mapeoFecha[year]) {\n        mapeoFecha[year][country] = Number((mapeoFecha[year][country]/total).toFixed(4));\n      }\n    }\n\n    const years = Object.keys(mapeoFecha); // Obtener las llaves de los años\n    const countries = Object.keys(mapeoFecha[years[0]]); // Obtener los nombres de los países\n    const datasetsLabels = countries; // Etiquetas de los conjuntos de datos serán los nombres de los países\n\n    // Crear la matriz de datos para los países\n    const datasetsData = countries.map((country) =>\n      years.map((year) => mapeoFecha[year][country])\n    );\n\n    console.log(\"datasetsData\");\n    console.log(datasetsData);\n\n    this.generarGraficoMultiple('lineChart5', years, datasetsLabels, datasetsData);\n    \n  }\n\n  filterAuthorsByDecade(authors: Author[], startYear: number, endYear: number): Author[] {\n    const filteredAuthors: Author[] = [];\n  \n    // Recorrer los autores originales\n    authors.forEach((author) => {\n      // Verificar si el autor está dentro de la década especificada\n      const authorYears = author.year.split(\",\").map(Number).filter((year) => year >= startYear && year <= endYear);\n\n      if (authorYears.length > 0) {\n        // Buscar si ya existe un autor fusionado con el mismo nombre y década\n        const existingAuthor = filteredAuthors.find((filteredAuthor) => filteredAuthor.researcher === author.researcher);\n        if (existingAuthor) {\n          // Fusionar las entradas del autor existente con las del autor actual\n          existingAuthor.numPublications += author.numPublications;\n          existingAuthor.year += `, ${author.year}`;\n        } else {\n          // Agregar el autor actual a la lista de autores filtrados\n          filteredAuthors.push({\n            ipNames: author.ipNames,\n            numPublications: author.numPublications,\n            researcher: author.researcher,\n            year: author.year\n          });\n        }\n      }\n    });\n\n    return filteredAuthors;\n  }\n\n  statsProlificAuthors(selectedYears: number[]): DecadeStats[] {\n    // Obtener el rango de años seleccionados por el usuario\n    const startYear = Math.min(...selectedYears);\n    const endYear = Math.max(...selectedYears);\n  \n    // Calcular las décadas correspondientes al rango de años seleccionados\n    const startDecade = Math.floor(startYear / 10) * 10;\n    const endDecade = Math.floor(endYear / 10) * 10;\n  \n    // Generar las décadas dentro del rango de años seleccionados\n    const decades: DecadeStats[] = [];\n    for (let decade = startDecade; decade <= endDecade; decade += 10) {\n      const decadeLabel = `${decade}s`;\n      const decadeStartYear = decade;\n      const decadeEndYear = decade + 9;\n      const decadeAuthors = this.filterAuthorsByDecade(this.singleAuthor, decadeStartYear, decadeEndYear);\n  \n      decades.push({\n        label: decadeLabel,\n        startYear: decadeStartYear,\n        endYear: decadeEndYear,\n        authors: decadeAuthors\n      });\n    }  \n    // Ordenar los autores por número de publicaciones en cada década\n    decades.forEach((decade) => {\n      decade.authors.sort((a, b) => b.numPublications - a.numPublications);\n      if (decade.authors.length > 20){\n        decade.authors = decade.authors.slice(0, 20); \n      } \n    });\n  \n    // Devolver las décadas con los autores ordenados\n    return decades;\n  }\n\n  generarTablasDecadas(decadeStats: any[]){\n    const tablas: { [key: string]: HTMLElement | null } = {\n      '1990s': document.querySelector('#tabla90 tbody'),\n      '2000s': document.querySelector('#tabla00 tbody'),\n      '2010s': document.querySelector('#tabla10 tbody'),\n      '2020s': document.querySelector('#tabla20 tbody'),\n    };\n  \n    console.log(\"decadestats\");\n    console.log(decadeStats);\n    for (const decada of decadeStats) {\n      const tabla = tablas[decada.label];\n  \n      if (tabla instanceof HTMLElement) {\n        decada.authors.slice(0, 20).forEach((autor: { researcher: any; numPublications: any; year: any; }) => {\n          const row = document.createElement('tr');\n          row.innerHTML = `<td>${autor.researcher}</td><td>${autor.numPublications}</td>`;\n  \n          tabla.appendChild(row);\n        });\n      }\n    }\n  }\n\n  generarGrafico3(idChart: string, label: string, labels: any[], data: any[]) {\n    this.lineChart = new Chart(idChart, {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: label,\n            data: data,\n            fill: false,\n            borderColor: 'rgb(0, 22, 68)',\n            borderWidth: 1\n          }\n        ]\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 25, \n                family: 'Roboto',\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            type: 'linear',\n            display: true\n          }\n        },\n      }\n    });\n  }\n\n  generarGraficoMultiple(chartId: string, labels: string[], datasetsLabels: string[], datasetsData: number[][]) {\n    const datasets = datasetsLabels.map((label, index) => ({\n      label: label,\n      data: datasetsData[index],\n      backgroundColor: 'rgba(0, 0, 0, 0.1)',\n      borderColor: this.getRandomColor(index),\n    }));\n  \n    const chartConfig: ChartConfiguration<'line'> = {\n      type: 'line',\n      data: {\n        labels: labels,\n        datasets: datasets,\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 25, \n                family: 'Roboto',\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            type: 'linear',\n            display: true,\n          },\n        },\n      },\n    };\n  \n    // Crear el gráfico\n    const ctx = document.getElementById(chartId) as HTMLCanvasElement;\n    new Chart(ctx, chartConfig);\n  }\n\n  generarGraficoBarras(idChart: string, label: string, labels: any[], data: any[]) {\n    this.barChart = new Chart(idChart, {\n      type: 'bar',\n      data: {\n        labels: labels,\n        datasets: [\n          {\n            label: label,\n            data: data,\n            backgroundColor: 'rgb(0, 22, 68)',\n            borderColor: 'rgb(0, 22, 68)',\n            borderWidth: 1\n          }\n        ]\n      },\n      options: {\n        plugins: {\n          legend: {\n            labels: {\n              color: 'black',\n              font: {\n                size: 25, \n                family: 'Roboto',\n              }\n            }\n          }\n        },\n        scales: {\n          y: {\n            beginAtZero: true\n          }\n        }\n      }\n    });\n  }  \n\n  randomColor(){\n    const r = Math.floor(Math.random() * 256);\n    const g = Math.floor(Math.random() * 256);\n    const b = Math.floor(Math.random() * 256);\n    return `rgba(${r}, ${g}, ${b}, 1)`;\n  }\n\n  getRandomColor(index: number) {\n    let colors: Record<number, string> = {\n      0: \"rgba(75, 192, 192, 1)\",\n      1: \"rgba(192, 75, 75, 1)\",\n      2: \"rgba(98, 192, 75, 1)\", \n      3: \"rbga(192, 141, 75, 1)\",\n      4: \"rgba(226, 232, 107, 1)\",\n      5: \"rgba(176, 75, 192, 1)\"\n    };\n\n    return colors[index];\n  }\n  async main(){\n    try {\n      this.titulosSeleccionados = this.seleccionService.obtenerTitulosSeleccionados();\n      console.log((\"TItulosselecc\"));\n      console.log(this.titulosSeleccionados);\n      this.conferenceOption = this.seleccionService.obtenerOpcionConferencia();\n      this.venueName = this.seleccionService.obtenerNombreVenue();\n\n      this.obtenerPapers();\n      this.obtenerColaboraciones();\n      this.obtenerSingleAuthorPapers();\n      this.obtenerResearchers();\n\n      if(this.researchers.length == 0){\n        await this.esperarResearcherNoVacio();\n        this.obtenerDatosDemograficos();\n      } else{\n        this.obtenerDatosDemograficos();\n      }      \n\n      if(this.papersWithAuthors.length == 0){\n        await this.esperarAuthorsWithPapersNoVacio();\n        this.obtenerTopicAnalisis();\n        this.obtenerDistribuciones();\n      }else{\n        this.obtenerTopicAnalisis();\n        this.obtenerDistribuciones();\n      }\n      \n      if(this.singleAuthor.length == 0){\n        await this.esperarSingleAuthorsNoVacio();\n        this.decadeStats = this.statsProlificAuthors(this.yearsSeleccionados);\n        this.generarTablasDecadas(this.decadeStats)\n      }else{\n        this.decadeStats = this.statsProlificAuthors(this.yearsSeleccionados);\n        this.generarTablasDecadas(this.decadeStats)\n      }\n\n  } catch (error) {\n    console.error('Error al obtener los datos:', error);\n  }\n  }\n\n}","\n<h2>Estadísticas</h2>\n\n<body>\n  <!-- Investigadores y papers -->\n  <div class=\"flex-container\">\n    <div class=\"flex-item\">\n      <canvas id=\"lineChart1\"></canvas>\n    </div>\n    <div class=\"flex-item\">\n      <canvas id=\"lineChart2\"></canvas>\n    </div>\n  </div>\n\n  <div class=\"flex-container\">\n    <div class=\"flex-item\">\n        <canvas id=\"lineChart3\"></canvas>\n    </div>\n    <div class=\"flex-item\">\n        <canvas id=\"barChart1\"></canvas>\n    </div>\n  </div>\n\n  <hr class=\"line\">\n\n  <div class=\"container\">\n      <div class=\"tabla1\">\n        <table id=\"autoresTabla\" class=\"centered-table\">\n          <thead>\n            <tr>\n              <th>Autores</th>\n              <th>Papers (%)</th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n      </div>\n\n    <div class=\"tabla2\">\n      <table id=\"papersTabla\" class=\"centered-table\">\n        <thead>\n          <tr>\n            <th>Papers</th>\n            <th>Autores (%)</th>\n          </tr>\n        </thead>\n        <tbody></tbody>\n      </table>\n    </div>\n  </div>\n\n  <hr class=\"line\">\n\n  <div class=\"flex-container\">\n    <div class=\"flex-item\">\n        <canvas id=\"lineChart4\"></canvas>\n    </div>\n    <div class=\"flex-container\">\n      <div class=\"flex-item\"> \n        <canvas id=\"lineChart5\"></canvas>\n      </div>\n    </div>\n  </div>\n  <hr class=\"line\">\n\n  <div class=\"container\">\n\n    <div class=\"tabla1\">\n        <table id=\"tablaBigramas\">\n          <thead>\n            <tr>\n              <th>Bigrama</th>\n              <th>Apariciones</th>\n              <th>Primer <br> año</th>\n              <th>Último <br> año</th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n    </div>\n\n    <div class=\"tabla2\">\n        <table id=\"tablaTrigramas\">\n          <thead>\n            <tr>\n              <th>Trigrama</th>\n              <th>Apariciones</th>\n              <th>Primer <br> año</th>\n              <th>Último <br> año</th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n    </div>\n  </div>\n\n  \n  <hr class=\"line\">\n\n  <div class=\"conceptual\">\n      <angular-tag-cloud [config]=\"options\" [data]=\"cloudData\"></angular-tag-cloud>\n  </div>\n\n  <hr class=\"line\">\n\n  <h4>Autores más prolíficos de acuerdo a su número de publicaciones por década</h4>\n  <div class=\"container\">\n    <div class=\"tabla1\">\n        <table id=\"tabla90\" class=\"centered-table\">\n          <thead>\n            <tr>\n              <th colspan=\"2\">\n                (a) 1989-1999\n              </th>\n            </tr>\n            <hr class=\"line2\">\n            <tr>\n              <th>Author</th>\n              <th>#</th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n    </div>\n\n    <div class=\"tabla2\">\n        <table id=\"tabla00\" class=\"centered-table\">\n          <thead>\n            <tr>\n              <th colspan=\"2\">\n                (b) 1999-2009\n              </th>\n            </tr>\n            <hr class=\"line2\">\n            <tr>\n              <th>Author</th>\n              <th>#</th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n    </div>\n  </div>\n\n  <hr class=\"line\">\n\n  <div class=\"container\">\n    <div class=\"tabla1\">\n        <table id=\"tabla10\" class=\"centered-table\">\n          <thead>\n            <tr>\n              <th colspan=\"2\">\n                (a) 2009-2019\n              </th>\n            </tr>\n            <hr class=\"line2\">\n            <tr>\n              <th>Author</th>\n              <th>#</th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n    </div>\n\n    <div class=\"tabla2\">\n        <table id=\"tabla20\" class=\"centered-table\">\n          <thead>\n            <tr>\n              <th colspan=\"2\">\n                (a) 2019-2029\n              </th>\n            </tr>\n            <hr class=\"line2\">\n            <tr>\n              <th>Author</th>\n              <th>#</th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n        </table>\n      </div>\n  </div>\n</body>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}